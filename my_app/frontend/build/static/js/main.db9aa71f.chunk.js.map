{"version":3,"sources":["components/ShowAlert.js","components/Spinner.js","components/ShowSpinner.js","components/SelectType.js","components/EnterLeave.js","components/sharePoint/SharePoint.js","components/sharePoint/ShowSharePointFiles.js","components/sharePoint/UploadForm.js","ApplyLeave.js","Home.js","SwitchUser.js","components/UserProfile.js","ApprovalCenter.js","CancelLeave.js","PartnersLeave.js","App.js","index.js"],"names":["ShowAlert","props","alert","class_var","concat","color","className","message","Spinner","promiseInProgress","usePromiseTracker","area","spinnerMessage","style","marginTop","width","height","display","justifyContent","alignItems","fontWeight","ShowSpinner","position","SelectType","setDisplayAlert","userProfile","leaveType","setLeaveType","year","setYear","currentRacf","refreshPage","convert2MMDDYY","setLeaveList","useState","balance","setBalance","currentEntitlement","setCurrentEntitlement","yearAry","setYearAry","useEffect","years","year_tup","JSON","parse","year_ary","num_of_years","Object","keys","length","year_max","values","year_only_ary","i","push","yearEntitlement","entitlement","filter","x","Number","lastYearEntitlement","toString","annualCarryForward","carry_forward","thisYearEntitlement","annual_entitlement","casualEntitlement","casual_entitlement","trackPromise","axios","url","method","headers","api","data","stringify","then","response","balance_selected","catch","error","console","log","staff","name","window","location","dept","date_join","onChange","event","value","target","id","office","borderBottom","marginLeft","marginRight","String","timeout","map","index","desc","isNaN","taken","pending","EnterLeave","racf","superUserMode","setRefreshPage","sharePointID","sharePointFiles","leaveList","startLeaveDate","setStartLeaveDate","endLeaveDate","setEndLeaveDate","startPeriod","setStartPeriod","endPeriod","setEndPeriod","weekday","dateToString","date","pos","userTimezoneOffset","getTimezoneOffset","d","Date","getTime","toISOString","substring","stringToDate","dateString","isoToShort","s","slice","handleSubmitLeave","updateDB","nLeaveList","oLeaveList","uuidv4","applying","applyingScreen","forEach","e","entireLeaveRequest","calendarDay","workday","len_leaveList","nLeavelist_entry","status","error_message","includes","dateFormat","selected","onClick","getDay","prev","SharePoint","sharePointPath","src","alt","newWindow","open","opener","handleClick_view","ShowSharePointFiles","setRefreshSharePointList","refreshSharePointList","setSharePointFiles","err","line","filename","size","file_name","file_url","relative_path","fetch","encodeURIComponent","blob","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","parentNode","removeChild","unique_id","confirm","_id","getElementById","UploadForm","selectedFile","setSelectedFile","showUploadAlert","uploadResult","msg","file","reason","handleUpload","files","options","relative_url","userName","formData","FormData","append","post","errMessage","osition","type","multiple","ApplyLeave","convertToLocalTime","setSharePointID","convertToLocal","t","toTimeString","local","toDateString","local_end","search","root","querySelector","userAgent","navigator","toLowerCase","test","setProperty","printSummary","now","ok","text","Home","border","SwitchUser","setCurrentRacf","displayAndLogin","setUserProfile","userList","setUserList","refreshUserList","useCallback","nUserList","sort","a","b","impersonatedUser","user","UserProfile","setSuperUserMode","photoURL","setPhotoURL","email","toggleSuperUser","databaseSchema","superUser","undefined","ApprovalCenter","pendingList","setPendingList","checkedState","setCheckedState","refreshApprove","new_pendingList","new_checkState","Array","fill","checkSelection","maxSelect","num_selected","first_selected","ref_no","handleClearAll","handleApprove","refNo","action","localTime","handleReject","allApprovalCheckboxes","getElementsByName","checked","ref","updatedCheckedState","item","handleOnChange","approvalStatus","type_id","class","folder","gotoSharePoint","sharePointId","details","y","index2","startDate","startTime","endDate","endTime","handleSelectAll","CancelLeave","refreshCancelLeave","handleCancel","handlePrintReference","checkSelectionResult","PartnersLeave","refreshPartnersLeave","list","order","nList","sortPendingList","App","setSuperUser","setAlert","setSharePointPath","alert_in","setTimeout","_alert","iso_date","new_date","split","to","gotoPowerBI","localStorage","clear","path","element","env","environment","ReactDOM","render"],"mappings":"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","file":"static/js/main.db9aa71f.chunk.js","sourcesContent":["import React from \"react\"\n\nconst ShowAlert = props => {\n  const alert = props.alert\n  const class_var = \"alert \".concat(alert.color)\n\n  return (\n    // present the table\n    <h5 className={class_var}>{alert.message}</h5>\n  )\n}\nexport default ShowAlert\n","import React from \"react\"\nimport { usePromiseTracker } from \"react-promise-tracker\"\nimport   {Bars} from \"react-loader-spinner\"\n\nexport const Spinner = props => {\n  const { promiseInProgress } = usePromiseTracker({ area: props.area })\n  const { spinnerMessage } = props\n\n  return (\n    promiseInProgress && (\n      <div\n        style={{\n          marginTop: \"0.5rem\",\n          width: \"100%\",\n          height: \"30\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          color: \"green\",\n          fontWeight: \"bold\"\n        }}\n      >\n        {/* <Loader type=\"ThreeDots\" color=\"#2BAD60\" height=\"50\" width=\"100\" /> */}\n        {/* <Loader type=\"Circles\" color=\"rgba(129, 160, 250, 255)\" height=\"40\" width=\"100\" /> */}\n        {spinnerMessage}\n        {/* <ThreeDots color=\"green\" height=\"30\" width=\"100\" /> */}\n        <Bars color=\"green\" height={30} width={100} />\n      </div>\n    )\n  )\n}\n\n","import React, { Fragment } from \"react\"\nimport  {Spinner}  from \"./Spinner\"\n\nconst ShowSpinner = props => {\n  const { position } = props\n\n  return (\n    <Fragment>\n      {position === 1 ? <Spinner area=\"getUserProfile\" spinnerMessage=\"Loading your profile, please wait... \" /> : null}\n      {position === 2 ? (\n        <div>\n          <Spinner area=\"dummy\" spinnerMessage=\"Preparing the summary, please wait... \" />   \n        </div>\n      ) : null}\n      {position === 3 ? (\n        <div>         \n          <Spinner area=\"typeOfLeave\" spinnerMessage=\"Validating the input, please wait... \" />  \n          <Spinner area=\"printSummary\" spinnerMessage=\"Generating the Leave Summary, please wait... \" />   \n        </div>\n      ) : null}\n      \n      {position === 4 ? (\n        <div>               \n          <Spinner area=\"switchUser\" spinnerMessage=\"Switching the user, please wait... \" /> \n          <Spinner area=\"approvalCenter\" spinnerMessage=\"Loading approval details, please wait... \" /> \n          <Spinner area=\"cancelLeave\" spinnerMessage=\"Loading applied leave details, please wait... \" /> \n          <Spinner area=\"changeStatus\" spinnerMessage=\"Updating status, please wait... \" /> \n          <Spinner area=\"getSharePoint\" spinnerMessage=\"Getting SharePoint list, please wait... \" /> \n          <Spinner area=\"deleteSharePoint\" spinnerMessage=\"Deleting SharePoint files, please wait... \" /> \n          <Spinner area=\"uploadSharePoint\" spinnerMessage=\"Uploading SharePoint files, please wait... \" /> \n          <Spinner area=\"downloadSharePoint\" spinnerMessage=\"Downloading SharePoint files, please wait... \" /> \n          <Spinner area=\"partnersLeave\" spinnerMessage=\"Loading partners leave details, please wait... \" /> \n        </div>\n      ) : null}\n      \n    </Fragment>\n  )\n}\nexport default ShowSpinner\n","import { React, useState, useEffect, Fragment } from \"react\"\r\nimport axios from \"axios\"\r\nimport { trackPromise } from \"react-promise-tracker\"\r\nimport ShowSpinner from \"./ShowSpinner\"\r\n\r\nconst SelectType = props => {\r\n \r\n  const {setDisplayAlert} = props   \r\n\r\n  const {userProfile, leaveType, setLeaveType, year, setYear, currentRacf, refreshPage, convert2MMDDYY,setLeaveList } = props   \r\n  const [balance, setBalance] = useState(\"\")\r\n  const [currentEntitlement, setCurrentEntitlement] = useState(\"\")\r\n  const [yearAry, setYearAry] = useState([])\r\n\r\n \r\n  \r\n  useEffect(() => {       \r\n      \r\n      // Find current year \r\n      if (userProfile.years) {      \r\n        const year_tup = JSON.parse(userProfile.years)      \r\n        const year_ary = year_tup['year']    \r\n        const num_of_years = Object.keys(year_ary).length\r\n        const year_max = Object.values(year_ary)[num_of_years-1]        \r\n        if (!(year)) {setYear(year_max)}   // set default to current year \r\n        if (!(leaveType)) {setLeaveType('LVE01')}   // set default to elave type \r\n                \r\n        const year_only_ary = []\r\n        for (let i = 0; i < num_of_years; i++) {\r\n          year_only_ary.push( { \"year\": Object.values(year_ary)[i], \"desc\" : year_tup['period'][i]  })\r\n        }\r\n        //console.log(year_only_ary)\r\n        setYearAry(year_only_ary)    \r\n      }\r\n  }, [userProfile.years, leaveType, year, setLeaveType, setYear])\r\n\r\n\r\n  useEffect(() => {           \r\n    if ( !year || !leaveType) {\r\n       return \r\n    }\r\n\r\n     \r\n    // look for the entitlement based on year and leave type    \r\n    const yearEntitlement = userProfile.entitlement.filter(x=>x.year ===Number(year))    //Annual Leave\r\n    \r\n    if (yearEntitlement.length === 0) {            \r\n      return        \r\n    }\r\n   \r\n    if (leaveType  === 'LVE01')  {         \r\n      const lastYearEntitlement = (Number(year) - 1).toString()        \r\n      const annualCarryForward = (yearEntitlement[0].carry_forward).toString()\r\n      const thisYearEntitlement = (yearEntitlement[0].annual_entitlement).toString()\r\n      //console.log('currentEntitlement :',  annualCarryForward + \" (\" + lastYearEntitlement + \")  +  (\"  + thisYearEntitlement   + \") \" + year ) \r\n      const _currentEntitlement = annualCarryForward + \" (\" + lastYearEntitlement + \")  +  \"  + thisYearEntitlement   + \" (\" + year +\")\"\r\n      setCurrentEntitlement(_currentEntitlement)  \r\n    }\r\n    else if  (leaveType  === 'LVE02')  {      \r\n      const casualEntitlement = (yearEntitlement[0].casual_entitlement).toString()      \r\n      const _currentEntitlement =  \"(\" + casualEntitlement   + \") \" + year     \r\n      //console.log('currententitlement',_currentEntitlement)\r\n      setCurrentEntitlement(_currentEntitlement)  \r\n    }\r\n\r\n    trackPromise(\r\n      axios({\r\n        url: \"/eleave/api/listleave\",\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-type\": \"application/json\",\r\n          api: \"yes\"         \r\n        },        \r\n        data: JSON.stringify({\"year\": Number(year), \"racf\":   currentRacf} )      \r\n      }\r\n    )\r\n    .then(response => response.data)\r\n    .then(response => {          \r\n      const balance_selected = (response['result'][0][\"header\"]).filter(x=> (x[\"leaveTypeId\"] === leaveType))                             \r\n      setBalance(balance_selected[0])                   \r\n    })\r\n    .catch(error => {\r\n      console.log(error)\r\n    }),\r\n  \"typeOfLeave\"\r\n    )\r\n    return () => {\r\n      setBalance({}) // This worked for me            \r\n    }\r\n\r\n\r\n  }, [year, leaveType,  userProfile, setCurrentEntitlement, setDisplayAlert, currentRacf, refreshPage])\r\n\r\n  //  Handle select year \r\n  const handleSelectYear =  event => {    \r\n        const { value } = event.target       \r\n    \r\n            // look for the entitlement based on year and leave type    \r\n        const yearEntitlement = userProfile.entitlement.filter(x=>x.year ===Number(value))    //Annual Leave\r\n        \r\n        if (yearEntitlement.length === 0) {      \r\n          setDisplayAlert({ message: \"Year \" + String(value) +  \" is not available !\", position: 1, timeout: 3000, color: \"alert__red\" })      \r\n          \r\n        }\r\n        setYear(value)          \r\n\r\n  }  \r\n      \r\n  //  Handle select type \r\n  const handleSelectLeaveType = event => {\r\n        const { value } = event.target                \r\n        setLeaveList([])\r\n        setLeaveType(value)           \r\n        \r\n  }    \r\n\r\n\r\n  const login = () => {\r\n    //localStorage.clear()\r\n    window.location = \"/login\"\r\n  }\r\n\r\n  //  Prevent from loading error due to page refresh\r\n  try {\r\n    if (userProfile.staff.name)  {\r\n      \r\n    }\r\n  }         \r\n  catch\r\n  {\r\n    login()\r\n  }\r\n\r\n     \r\n  return (\r\n    <Fragment>\r\n        \r\n      <div>\r\n\r\n        <div>        \r\n        \r\n            <div className=\"separator\">Applicant Details</div>        \r\n        \r\n            <div className=\"emp_grid\">            \r\n                <div className=\"emp_area_a emp_grid_a\">\r\n                  <div>Name: </div>              \r\n                  <div>{userProfile.staff.name}</div>              \r\n                </div>\r\n\r\n                <div className=\"emp_area_b emp_grid_b\">\r\n                  <div>Position:</div>\r\n                  <div>{userProfile.staff.position}</div>                            \r\n                </div>\r\n\r\n                <div className=\"emp_area_c emp_grid_c\">\r\n                  <div>Division/Department: </div>              \r\n                  <div>{userProfile.staff.dept}</div>              \r\n                </div>\r\n\r\n                <div className=\"emp_area_d emp_grid_d\">\r\n                  <div>Date Joined:</div>\r\n                  <div>{convert2MMDDYY(userProfile.staff.date_join)}</div>                            \r\n                </div>                           \r\n            </div>            \r\n\r\n            <div className=\"separator\">Choose Leave Type</div>            \r\n            <div className=\"type_grid\">            \r\n                <div className=\"type_area_a type_grid_a\">\r\n                  <div>Select Leave Type:</div>\r\n                  <div>\r\n                      <select style={{width: '30rem'}} onChange={handleSelectLeaveType} id=\"selectLeaveTypeOption\" className=\"clickable\" value={leaveType}>                                      \r\n                      <option value=\"LVE01\" >\r\n                        Annual Leave \r\n                      </option>\r\n                      {userProfile.staff.office === \"DEL\" || userProfile.staff.office === \"FLR\" ? ( \r\n                          <option value=\"LVE02\" >\r\n                          Casual/Festivities Leave\r\n                          </option>\r\n                      ) : null}\r\n                      \r\n                      <option value=\"LVE03\" >\r\n                        Work from Home \r\n                      </option>\r\n                      <option value=\"LVE04\" >\r\n                        Sick Leave With Medical Cert \r\n                      </option>\r\n                      <option value=\"LVE05\" >\r\n                        Sick Leave Without Medical Cert \r\n                      </option>             \r\n                      </select>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"type_area_b type_grid_b\" style={{ borderBottom: \"2px solid gray\", marginLeft: 0, marginRight: 0 }}  >                  \r\n                      <div >Annual Leave Balance</div>                      \r\n                </div>        \r\n                \r\n                <div className=\"type_area_c type_grid_c\"  >\r\n                  <div>Leave Calendar Year:</div>\r\n                  <div>\r\n                      <select style={{width: '30rem'}} onChange={handleSelectYear} id=\"selectYearOption\" className=\"clickable\" value={year} >                \r\n                      {/* <option value=\"Select\">Select</option> */}\r\n                      {yearAry.map((x, index) => (\r\n                        <option key={index} value={x.year}>\r\n                         {x.desc}\r\n                      </option>\r\n                      ))}      \r\n                      </select>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                <div className=\"type_area_f type_grid_f\">\r\n                      <div>Days Entitled For The Period: </div>   \r\n                      <div>{(leaveType  === 'LVE01' || leaveType  === 'LVE02' )? currentEntitlement: \"N/A\"}</div>                                           \r\n                </div>\r\n\r\n               \r\n                <div className=\"type_area_d type_grid_d\">\r\n                      <div>Days Already Taken (Approved + Pending): </div>                                    \r\n                      <div>{isNaN(balance.taken + balance.pending)?\"N/A\": (balance.taken + balance.pending) + \" (\" + balance.taken + \" + \" + balance.pending + \")\"}</div>      \r\n                </div>\r\n\r\n                <div className=\"type_area_e type_grid_e\">\r\n                      <div># of Days Left: </div>    \r\n                      <div>{(leaveType  === 'LVE01' || leaveType  === 'LVE02' )? balance.balance: \"N/A\"}</div>              \r\n                </div>\r\n\r\n            </div>    \r\n        </div>\r\n\r\n      </div>\r\n      <ShowSpinner position={10} /> \r\n    </Fragment>\r\n  )\r\n  }\r\n\r\nexport default SelectType","import { React, useState, Fragment } from \"react\"\r\nimport axios from \"axios\"\r\nimport { trackPromise } from \"react-promise-tracker\"\r\nimport ShowSpinner from \"./ShowSpinner\"\r\nimport DatePicker from \"react-datepicker\"\r\nimport { v4 as uuidv4 } from \"uuid\"\r\n\r\n \r\nconst EnterLeave = props => {\r\n\r\n  const {year, racf, superUserMode, leaveType, setDisplayAlert, setRefreshPage, sharePointID, sharePointFiles, leaveList, setLeaveList} = props \r\n\r\n  const [startLeaveDate, setStartLeaveDate] = useState(\"\")\r\n  const [endLeaveDate, setEndLeaveDate] = useState(\"\")\r\n  const [startPeriod, setStartPeriod] = useState(\"Full Day\")\r\n  const [endPeriod, setEndPeriod] = useState(\"Full Day\")  \r\n\r\n  const weekday= ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\r\n \r\n \r\n  // This is needed to mitigate the dates between browser (local time) and server (Mongo DB)\r\n  // When date (date.getTime) is selected, the date is based on UTC 00:00.  That could be the next day. \r\n  // Therefore, the offset has to be calcualted and be used to minus the date  \r\n  const dateToString = (date, pos) => {      \r\n    if (!date) { return}\r\n    const userTimezoneOffset = date.getTimezoneOffset() * 60000;\r\n    const d = new Date(date.getTime() - userTimezoneOffset);\r\n    //console.log('d', d.toISOString().substring(0,10))\r\n    if (pos ===1) {\r\n      setStartLeaveDate(d.toISOString().substring(0,10))     \r\n      //if (endLeaveDate.length === 0) {\r\n      setEndLeaveDate(d.toISOString().substring(0,10))     \r\n      //}\r\n    }\r\n    else\r\n    {\r\n      setEndLeaveDate(d.toISOString().substring(0,10))          \r\n    }\r\n    \r\n  }\r\n  \r\n  // This is needed to mitigate the dates between browser (local time) and server (Mongo DB)\r\n  // When date (date string) is captured, it is based on UTC 00:00. So the local time could become the previous day. \r\n  // Therefore, the offset has to be calcualted and be used to add to the date string   \r\n\r\n  const stringToDate = dateString => {    \r\n    let d = dateString       \r\n    if (d === \"\") {      \r\n      return\r\n      //d = new Date()    \r\n      //const userTimezoneOffset = d.getTimezoneOffset() * 60000;\r\n      //d = new Date(d.getTime() - userTimezoneOffset);                 \r\n    }\r\n    else {\r\n      d = new Date(dateString)         \r\n      const userTimezoneOffset = d.getTimezoneOffset() * 60000;\r\n      d = new Date(d.getTime() + userTimezoneOffset);               \r\n    }\r\n    return d        \r\n  }\r\n  \r\n  const isoToShort = s => {\r\n     return  s.slice(5,7) + \"/\" + s.slice(8,10) + \"/\" + s.slice(2,4)\r\n  }   \r\n     \r\n   \r\n  \r\n  const handleDelLeave =  (id)  => {   \r\n    setLeaveList(prev => prev.filter(x=>(x.id !==id) ))           \r\n  }\r\n\r\n  const handleStartPeriod =   event => {     \r\n    const { value } = event.target\r\n    setStartPeriod(value)           \r\n  }\r\n\r\n  const handleEndPeriod =   event => {   \r\n    const { value } = event.target    \r\n    setEndPeriod(value)             \r\n  }\r\n\r\n  const handleClearLeave =  ()  => {   \r\n    setStartLeaveDate(\"\")\r\n    setEndLeaveDate(\"\")    \r\n    setStartPeriod(\"Full Day\")\r\n    setEndPeriod(\"Full Day\")\r\n  }\r\n  \r\n  const handleSubmitLeave = (updateDB) =>   {   \r\n    \r\n    if (startLeaveDate === endLeaveDate) {           \r\n      if (  (startPeriod===\"Full Day\"?\"PM\":startPeriod) > (endPeriod===\"Full Day\"?\"PM\":endPeriod) ) {              \r\n        setDisplayAlert({ message: \"Please check your time period!\", position: 1, timeout: 3000, color: \"alert__red\" })\r\n        return\r\n      }\r\n    }\r\n\r\n    if (startLeaveDate > endLeaveDate) {                   \r\n        setDisplayAlert({ message: \"Your start date of application is earlier than your end date!\", position: 1, timeout: 3000, color: \"alert__red\" })\r\n        return\r\n    }\r\n\r\n    const oLeaveList =  [...leaveList]\r\n    let nLeaveList\r\n    \r\n    if (updateDB) {    \r\n      // if Update DB is true - then it is a submit request, it doesn't require to insert a new line\r\n        nLeaveList =  [...leaveList]        \r\n    }\r\n    else {\r\n      nLeaveList = oLeaveList.concat({ \"id\": uuidv4(), startLeaveDate, startPeriod, endLeaveDate, endPeriod})\r\n    }\r\n    \r\n\r\n    let applying = []\r\n    let applyingScreen = []\r\n\r\n    nLeaveList.forEach((e) => {                \r\n        applying.push({ 'startDate' : e.startLeaveDate,  \r\n                                   'startTime' : e.startPeriod===\"Full Day\" ? \"AM\" : e.startPeriod,                                   \r\n                                   'endDate'   : e.endLeaveDate,    \r\n                                   'endTime'   : e.endPeriod===\"Full Day\" ? \"PM\" : e.endPeriod \r\n                                 })\r\n        applyingScreen.push({ 'startDate' : e.startLeaveDate,  \r\n                                   'startTime' : e.startPeriod,                                   \r\n                                   'endDate'   : e.endLeaveDate,    \r\n                                   'endTime'   : e.endPeriod \r\n                                 })\r\n\r\n    });\r\n    \r\n    const entireLeaveRequest = {\r\n          \"year\": Number(year),\r\n          \"racf\": racf,\r\n          \"type\": leaveType,\r\n          \"applying\" : applying,\r\n          \"applyingScreen\" : applyingScreen,\r\n          \"superUser\":superUserMode,\r\n          \"sharePointId\" : leaveType === \"LVE04\"? sharePointID:\"\",\r\n          \"updateDB\" : updateDB\r\n           \r\n    }\r\n\r\n    //console.log('entire',JSON.stringify(entireLeaveRequest)    )\r\n    //console.log('sharePointFiles',sharePointFiles  )\r\n\r\n    if (sharePointFiles.length === 0 && leaveType===\"LVE04\") {\r\n        setDisplayAlert({ message: \"Please upload medical document!\", position: 1, timeout: 4000, color: \"alert__red\" })\r\n        return\r\n    }\r\n    \r\n    if (nLeaveList) {\r\n\r\n      //console.log('entireLeaveRequest',entireLeaveRequest)\r\n\r\n      trackPromise(\r\n        axios({\r\n          url: \"/eleave/api/applyleave\",\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-type\": \"application/json\",\r\n            api: \"yes\"         \r\n          },          \r\n          data: JSON.stringify(entireLeaveRequest)      \r\n        }\r\n      )\r\n      .then(response => response.data)\r\n      .then(response => {                         \r\n        if (!(updateDB))   //  insert only             \r\n            {//console.log('response', response)                   \r\n             const calendarDay = response['result'][0]['calendarDay']\r\n             const workday = response['result'][0]['workday']\r\n             //console.log('return from db', calendarDay, workday)\r\n             const  len_leaveList = leaveList.length\r\n             const  nLeavelist_entry =  [...nLeaveList][len_leaveList]                          \r\n             nLeaveList[len_leaveList] = { ...nLeavelist_entry, calendarDay, workday } \r\n             setLeaveList(nLeaveList)                                                           \r\n             //setDisplayAlert({ message: \"\", position: 4, timeout: 1, color: \"alert__green\" })   \r\n            }\r\n        else {\r\n             setDisplayAlert({ message: \"Application submitted.  Please wait for approval from your people leader\", position: 4, timeout: 4000, color: \"alert__green\" })        \r\n             setLeaveList([])             \r\n             setRefreshPage(x=>!x)      /// force refresh of eleave balance\r\n        }            \r\n                \r\n      })\r\n      .catch(error =>  {                             \r\n        console.log(\"Error status\", error.response.status,  error.response.data.error_message)     // can also checking using error.response.status \r\n        if (error.response.data.error_message.includes('Incorrect parameters')) {\r\n          setDisplayAlert({ message: \"It seems you haven't had a single leave entry\", position: 1, timeout: 4000, color: \"alert__red\" })\r\n        }\r\n        else {\r\n          setDisplayAlert({ message: error.response.data.error_message, position: 4, timeout: 4000, color: \"alert__red\" })\r\n        }\r\n      }),\r\n      \"typeOfLeave\"\r\n      )\r\n      return () => {\r\n        //setBalance({}) // This worked for me            \r\n      }     \r\n    }\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <div>\r\n        <div>                        \r\n\r\n            <div className=\"separator\">Apply Leave</div>         \r\n\r\n            <div className=\"enterLeave_grid_c\">                       \r\n                    <div>Start Date</div>                    \r\n                    <DatePicker className=\"datePicker\" dateFormat=\"MM/dd/yy\" selected={stringToDate(startLeaveDate)} onChange={date => dateToString(date,1)}/>                   \r\n                    <select onChange={handleStartPeriod} id=\"enterLeave_startPeriod\" className=\"clickable\" value={startPeriod} >                \r\n                          <option value=\"Full Day\">Full Day</option> \r\n                          <option value=\"AM\">AM</option> \r\n                          <option value=\"PM\">PM</option>                      \r\n                    </select>              \r\n                         \r\n                    <div>End Date</div>          \r\n                    <DatePicker className=\"datePicker\" dateFormat=\"MM/dd/yy\" selected={stringToDate(endLeaveDate)} onChange={date => dateToString(date,2)}  />                                                                     \r\n                    <select onChange={handleEndPeriod} id=\"enterLeave_endPeriod\" className=\"clickable\" value={endPeriod} >                \r\n                          <option value=\"Full Day\">Full Day</option> \r\n                          <option value=\"AM\">AM</option> \r\n                          <option value=\"PM\">PM</option>                      \r\n                    </select>             \r\n\r\n                    \r\n                    <button id=\"addLeave\" onClick={() => {\r\n                               handleSubmitLeave(false)\r\n                            }}>Insert\r\n                    </button>      \r\n\r\n                    <button id=\"clearLeave\" onClick={() => {\r\n                               handleClearLeave()\r\n                            }}>Clear\r\n                    </button>                                      \r\n                    {leaveList.length > 0 ? (\r\n                        <button id=\"submitLeave\" onClick={() => {\r\n                              handleSubmitLeave(true) \r\n                             }}>Submit\r\n                       </button>):null\r\n                    }\r\n            \r\n               </div>\r\n            \r\n\r\n            <table id=\"enterLeaveTable\"> \r\n\r\n                <thead>          \r\n                  <tr className=\"enterLeave_grid_a\">\r\n                    <th>Start Date</th>          \r\n                    <th>Start Period</th>              \r\n                    <th>End Date</th>\r\n                    <th>End Period</th>              \r\n                    <th>No. of Working Days</th>\r\n                    <th>No. of Calendar Days</th>\r\n                    <th>Remove</th>                    \r\n                    </tr>                  \r\n                </thead>        \r\n            \r\n            \r\n                <tbody>\r\n                \r\n                    {leaveList.length > 0 ? (\r\n                    leaveList.map((x) => (\r\n                          <tr key={x.id}  className=\"enterLeave_grid_b\">                                                        \r\n                              <td>{isoToShort(x.startLeaveDate) + \" (\" + weekday[stringToDate(x.startLeaveDate).getDay() ] + \")\"}</td>                       \r\n                              <td>{x.startPeriod}</td>                              \r\n                              <td>{isoToShort(x.endLeaveDate) + \" (\" + weekday[stringToDate(x.endLeaveDate).getDay() ] + \")\"}</td>                       \r\n                              <td>{x.endPeriod}</td>                                                            \r\n                              <td>{x.workday}</td>                          \r\n                              <td>{x.calendarDay}</td>                             \r\n                              <td>   \r\n                                  <i\r\n                                    className=\"fa fa-close clickable\"\r\n                                    onClick={() => {\r\n                                      handleDelLeave(x.id)\r\n                                    }}\r\n                                  ></i>\r\n                           </td>                              \r\n                         </tr>             \r\n                    ))) : null}              \r\n                \r\n                </tbody>\r\n            </table>      \r\n\r\n     \r\n        </div>\r\n        \r\n      </div>\r\n      <ShowSpinner position={10} />\r\n\r\n    </Fragment>\r\n  )\r\n  }\r\n\r\nexport default EnterLeave ","import React, { Fragment } from \"react\"\n \nconst SharePoint = props => {\n  const {currentRacf, sharePointPath,  sharePointID, year } = props\n\n  \n  const handleClick_view = () => {\n    //https://macysinc.sharepoint.com/sites/MMGOverseas/2023Eleave/Forms/AllItems.aspx?dt=1671001816489&id=%2Fsites%2FMMGOverseas%2F2023ELeave%2FNF1VCC&FilterField1=SharePointID&FilterValue1=84829a80%2D6927%2D4aff%2Dba28%2D1feb7d7e64dc&FilterType1=Text&viewid=720379f5%2Deb23%2D410f%2D81d1%2Df4e43a1a1cab\n\n    // sharePoint variables : sharePointPath, racf and office\n    const url = \"https://macysinc.sharepoint.com/sites/MMGOverseas/\".concat(sharePointPath+year.toString(), \"/Forms/AllItems.aspx?id=%2Fsites%2FMMGOverseas%2F\", sharePointPath+year.toString(), \"%2F\", currentRacf, \"%2F\", \"&FilterType1=Text&viewid=720379f5-eb23-410f-81d1-f4e43a1a1cab&FilterField1=SharePointID&FilterValue1=\", sharePointID, \"&dt=\", new Date().getTime())\n    \n    console.log(url)\n\n    var newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\")\n    if (newWindow) newWindow.opener = null\n  }\n  \n\n  return (\n    <Fragment>\n      <div className=\"sharePoint_grid\">\n        <div className=\"sharePoint_cell\">\n          <img src=\"../static/img/sharePointx.jpg\" alt=\"sharePoint\" className=\"sharePoint_photo\" />\n        </div>\n        <div></div>\n\n        <div className=\"sharePoint_cell\">\n          Go to SharePoint&nbsp;\n          <i\n            className=\"fa  fa-sign-in clickable\"\n            onClick={() => {\n              handleClick_view()\n            }}\n          ></i>\n        </div>\n        <div></div>     \n      \n        <div className=\"sharePoint_cell\">\n          SharePoint ID  : {sharePointID} &nbsp;&nbsp;          \n        </div>\n      </div>\n    </Fragment>\n  )\n}\nexport default SharePoint\n","import React, { Fragment, useEffect} from \"react\"\nimport axios from \"axios\"\nimport { trackPromise } from \"react-promise-tracker\"\n\n\nconst ShowSharePointFiles = props => {\n  const {  currentRacf, sharePointID, setDisplayAlert, setRefreshSharePointList, refreshSharePointList, sharePointFiles, setSharePointFiles, year} = props\n\n  useEffect(() => {    \n\n      trackPromise(\n        axios({\n          url: \"/spoint/api/getsharepointfiles\",\n          method: \"POST\",\n          headers: {\n            \"Content-type\": \"application/json\",\n            api: \"yes\"\n          },\n          data: JSON.stringify({  racf :currentRacf,sharePointID:sharePointID, year:year })\n        })\n          .then(response => response.data)\n          .then(response => {\n            setSharePointFiles(response)\n            //console.log('getSharePointFiles', response)\n          })\n          .catch(err => {\n            if (err.response.status === 404) {\n              setDisplayAlert({ message: \"Folder on SharePoint was not created !\", position: 4, timeout: 2000, color: \"alert__red\" })\n            }\n          }),\n        \"getSharePoint\"\n      )\n\n   \n  }, [setDisplayAlert, sharePointID, currentRacf, refreshSharePointList, setSharePointFiles, year])\n\n \n  const downloadSharePointFile = (file_name, file_url) => {\n    \n    //console.log(file_name, file_url)\n  \n\n    trackPromise(\n      fetch(\"/spoint/api/downloadSharePointFile\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/octet-stream\",\n          \"Content-Disposition\": \"attachment\",\n          \"Cache-Control\": \"no-cache\",\n          // encode for non-English characters \n          file_url: encodeURIComponent(file_url)  \n        }\n      })\n        .then(response => response.blob())\n        .then(blob => {\n          // Create blob link to download\n          const url = window.URL.createObjectURL(new Blob([blob]))\n          const link = document.createElement(\"a\")\n          link.href = url\n          link.setAttribute(\"download\", file_name)\n\n          // Append to html link element page\n          document.body.appendChild(link)\n\n          // Start download\n          link.click()\n\n          // Clean up and remove the link\n          link.parentNode.removeChild(link)\n        }),\n      \"downloadSharePoint\"\n    )\n  }\n\n  \n  const handleDeleteSPfile = id => {\n    var confirm = window.confirm(\"Are you sure you want to delete the SharePoint file ? \")\n    if (confirm !== true) {\n      return\n    }\n    trackPromise(\n      axios({\n        url: \"/spoint/api/deleteSPfile\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\"\n        },\n        data: JSON.stringify({ _id: id })\n      })            \n      .then(response => {        \n          setDisplayAlert({ message: \"SharePoint file deleted successfully !\", position: 4, timeout: 3000, color: \"alert__green\" })                   \n          setRefreshSharePointList(x=>!x)              \n          document.getElementById(\"sharePoint_file\").value = null            \n      })        \n      .catch(err => {\n          setDisplayAlert({ message: \"Error deleting the SP file !\", position: 4, timeout: 3000, color: \"alert__red\" })\n      }),\n      \"delteSharePoint\"\n    )\n  }\n \n  return (\n    <Fragment>\n      {sharePointFiles ? (\n        <div className=\"showSharePointFiles_section\">\n          <div className=\"showSharePointFiles_grid_header\">\n            <div>File Name</div>\n            <div>File Size</div>\n            <div>Download</div>\n            <div>File Type</div>\n            <div>Delete</div>\n          </div>\n\n          <div>\n            {sharePointFiles.length > 0\n              ? (\n                  sharePointFiles.map((line, index) =>\n                    <div key={index} className=\"showSharePointFiles_grid_detail\">\n                      <div>{line.filename}</div>\n                      <div>{line.size}</div>\n                      <div>\n                        <i\n                          className=\"clickable fa fa-download\"\n                          onClick={() => {\n                            downloadSharePointFile(line.filename, line.relative_path)\n                          }}\n                        ></i>\n                      </div>\n                      <div>\n                        <i className=\"fa fa-file fa-file-doc\"></i>\n                      </div>       \n                      {true? (\n                        <div>\n                          <button\n                            id=\"sharePointFiles_deleteButton\"\n                            onClick={() => {\n                              handleDeleteSPfile(line.unique_id)                              \n                            }}\n                          >\n                            &times;\n                          </button>\n                        </div>\n                      ) : (\n                        <div>&nbsp;</div>\n                      )}\n                    </div>\n                  )\n                )\n              : (  \n                <div key={0} className=\"showSharePointFiles_grid_detail\">\n                        <div>No Files</div>\n                        <div></div>          \n                        <div></div>          \n                        \n                </div>)\n            }       \n          </div>\n        </div>\n      ) : null}\n    </Fragment>\n  )\n}\nexport default ShowSharePointFiles\n","import React, { Fragment, useState } from \"react\"\nimport axios from \"axios\"\nimport { trackPromise } from \"react-promise-tracker\"\n \nconst UploadForm = props => {\n  const { setDisplayAlert, sharePointPath,  sharePointID, currentRacf, userProfile, setRefreshSharePointList, year} = props\n  const [selectedFile, setSelectedFile] = useState()\n  // const [uploadResult, setUploadResult] = useState([])\n  \n  const handleFile = event => {\n    setSelectedFile({ file: event.target.files })\n  }\n\n  const showUploadAlert = (uploadResult) => {\n    let msg = \"\" \n    for (let i = 0; i < uploadResult.length; i += 1) {\n          msg = msg.concat('\\n\\n', uploadResult[i].file, ' - ',uploadResult[i].reason ) \n    }\n    if (msg.length > 0) {\n      msg = \"Following files cannot be uploaded : \".concat(msg) \n      alert (msg)\n    }\n    else return\n  }\n \n\n  const handleUpload = async () => {\n\n    const files = selectedFile.file      \n    \n    \n    const options = {\n      headers: {\n        sharePointID : sharePointID,        \n        relative_url: sharePointPath.concat(year.toString(), \"/\", currentRacf),\n        name: userProfile.userName,\n        office: userProfile.office\n      }\n    }\n\n    try {      \n      let uploadResult = []\n      for (let i = 0; i < files.length; i++) {\n        const formData = new FormData()\n        formData.append(\"files[]\", files[i])\n        try {\n          await trackPromise(axios.post(\"/spoint/api/upload\", formData, options), \"uploadSharePoint\")\n          setDisplayAlert({ message: \"Successfully uploaded \" + files[i].name + \" !!\", position: 4, timeout: 3000, color: \"alert__green\" })\n          //setUploadResult(prev=>prev.concat({ file: files[i].name, status: \"Complete\", reason:\"N/A\"}))           \n        } catch (error) {    \n          const errMessage = error.response.data.error_message\n          setDisplayAlert({ message: errMessage, position: 4, timeout: 3000, color: \"alert__red\" })\n          uploadResult = uploadResult.concat({ file: files[i].name, status: \"Failed\", reason:errMessage })          \n        }\n      }       \n      setRefreshSharePointList(x=>!x)\n      showUploadAlert(uploadResult)\n      document.getElementById(\"sharePoint_file\").value = null  \n  \n    } catch (err) {\n      setDisplayAlert({ message: \"Unexpected upload error !!\", osition: 3, timeout: 3000, color: \"alert__red\" })     \n      document.getElementById(\"sharePoint_file\").value = null            \n    }        \n  }\n \n  return (\n    <Fragment>\n      <div className=\"uploadDoc\">\n           <form>\n            <input type=\"file\" multiple name=\"file\" id=\"sharePoint_file\" onChange={handleFile} />\n            <button type=\"button\" onClick={handleUpload}>\n              Upload Documents\n            </button>\n          </form>\n       </div>\n    </Fragment>\n  )\n}\n\nexport default UploadForm","import React, { useState, Fragment, useEffect } from \"react\"\nimport ShowAlert from \"./components/ShowAlert\"\nimport SelectType from \"./components/SelectType\"\nimport EnterLeave from \"./components/EnterLeave\"\n\nimport { trackPromise } from \"react-promise-tracker\"\nimport ShowSpinner from \"./components/ShowSpinner\"\n\n// for SharePoint\nimport SharePoint from \"./components/sharePoint/SharePoint\"\nimport ShowSharePointFiles from \"./components/sharePoint/ShowSharePointFiles\"\nimport UploadForm from \"./components/sharePoint/UploadForm\"\n//import axios from \"axios\"\nimport { v4 as uuidv4 } from \"uuid\"\n\nconst ApplyLeave = props => {\n  const { currentRacf, superUserMode, setDisplayAlert, userProfile, staff, years, convert2MMDDYY, sharePointPath, convertToLocalTime, alert} = props     \n  const [year, setYear] = useState(\"\")\n  const [leaveType, setLeaveType] = useState(\"\")  \n  const [refreshPage, setRefreshPage] = useState(false)\n  const [leaveList, setLeaveList] = useState([])\n\n  // for SharePoints   \n  const [sharePointID, setSharePointID] = useState(\"\")    \n  const [refreshSharePointList, setRefreshSharePointList] = useState(false)\n  const [sharePointFiles, setSharePointFiles] = useState([])\n \n  useEffect(() => {\n    let root = document.querySelector(\":root\")\n    const userAgent = navigator.userAgent.toLowerCase()\n    const isTablet = /(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(userAgent)\n\n    // Remove padding of scroll width if it is tablet to make columns of ChangeTrack section aligned\n    if (isTablet) {\n      root.style.setProperty(\"--changeTrack_scroll_width\", \"7fr\")\n    } else {\n      root.style.setProperty(\"--changeTrack_scroll_width\", \"6.7fr\")\n    }\n\n    // check Safari browser\n    if (userAgent.includes(\"safari\") && userAgent.includes(\"macintosh\")) {\n      root.style.setProperty(\"--changeTrack_scroll_width\", \"7fr\")\n    }\n    \n  }, [])\n\n  useEffect(() => {    \n    setSharePointID(uuidv4())        \n  }, [refreshPage])\n \n  // convert to local time\n  function convertToLocal(date) {\n    const t = new Date(date).toTimeString()\n    const d = new Date(date).toDateString()\n    var local = d + \" \" + t\n    var local_end = local.search(\"GMT+\") - 1\n    local = local.substring(0, local_end)\n    return local\n  }\n\n  \n  const printSummary = async (file_name) => {\n \n     try {\n         // \"10/10/22 by VC\" - Per request, word \"Draft\" in the file name will be taken away but the code is still there in case it has to restored\n        file_name = \"Leave Summary for \" + year + \" (\" + currentRacf + \").xlsx\"\n                    \n        const response = await trackPromise(\n          fetch(\"/eleave/api/printsummary\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/octet-stream\",\n              \"Content-Disposition\": \"attachment\",\n              \"Cache-Control\": \"no-cache\",\n              \"localTime\": JSON.stringify(convertToLocal(Date.now())),\n              \"parameters\": JSON.stringify({ year: Number(year), racf: currentRacf })          \n            }\n\n        }), \"printSummary\")    \n\n        if (!response.ok) {\n          const data = await response.text();   \n          const msg = JSON.parse(data).error_message          \n          setDisplayAlert({ message: msg, position: 3, timeout: 4000, color: \"alert__red\" } )           \n        }\n        else {\n          const data = await response.blob();          \n          //Create blob link to download\n          const url = window.URL.createObjectURL(data)\n          const link = document.createElement(\"a\")\n          link.href = url  \n          // Give a name of the file \n          link.setAttribute(\"download\", file_name)\n          document.body.appendChild(link)\n          link.click()\n          link.parentNode.removeChild(link)           \n        }\n        // make sure we return something back from the API\n        return null\n\n    }\n    catch {}               \n      setDisplayAlert({ message: \"The summary seems no data !  Please check !\", position: 3, timeout: 4000, color: \"alert__red\" })                \n    }\n\n  const handlePrintSummary = event => {\n    const id = event.target.id\n\n    if (id === \"printSummary\") {\n      printSummary(\"Leave Summary.xlsx\")\n    }\n  }\n\n  return (\n    <Fragment>\n\n      <div className=\"subHeading\"> Apply Leave</div>\n      \n      <button id=\"printSummary\" onClick={handlePrintSummary}>\n        Print Summary\n      </button>\n\n      <SelectType userProfile={userProfile} staff={staff} years={years} year={year} setYear={setYear} leaveType={leaveType} setLeaveType={setLeaveType} setDisplayAlert={setDisplayAlert} currentRacf={currentRacf}\n             refreshPage={refreshPage}  convert2MMDDYY={convert2MMDDYY} setLeaveList={setLeaveList}\n      />\n\n      {alert.position === 1 ? (\n        <div className=\"flex-row\">\n          <div className=\"flex-large\">\n            <ShowAlert alert={alert} />\n          </div>\n        </div>\n      ) : null}\n\n\n      {alert.position === 4 ? (\n                  <div className=\"flex-row\">\n                    <div className=\"flex-large\">\n                      <ShowAlert alert={alert} />\n                    </div>\n                  </div>\n      ) : null}\n      <ShowSpinner position={4} />\n\n      {/* SharePoint Section starts here */}\n\n      {leaveType && leaveType===\"LVE04\" ? (\n            <div>                          \n                <div className={\"flex-row \" + (true? null : \"hideSection\")}>\n                  <div className=\"flex-large \">\n                    <SharePoint currentRacf={currentRacf} year={year}  office = {userProfile.office}  sharePointPath={sharePointPath} sharePointID={sharePointID} \n                     />          \n                  </div>\n                </div>\n\n                <div className={\"flex-row \" + (true ? null : \"hideSection\")}>\n                  <div className=\"flex-large \">\n                    <ShowSharePointFiles   currentRacf={currentRacf} convertToLocalTime={convertToLocalTime} setDisplayAlert={setDisplayAlert} \n                    sharePointID={sharePointID} setRefreshSharePointList={setRefreshSharePointList} refreshSharePointList={refreshSharePointList}\n                    setSharePointFiles={setSharePointFiles} sharePointFiles={sharePointFiles} year={year}\n                    />\n                  </div>\n                </div>\n              \n\n                <div className={\"flex-row \" + (true ? null : \"hideSection\")}>\n                  {/* <div className={\"flex-row  hideSection\"}> */}\n                  <div className=\"flex-large \">\n                    <UploadForm setDisplayAlert={setDisplayAlert}  sharePointPath={sharePointPath} currentRacf={currentRacf} sharePointID={sharePointID} userProfile={userProfile} \n                    setRefreshSharePointList={setRefreshSharePointList} year={year} />                                            \n                  </div>\n                </div>\n                </div>\n            ):null\n    }    \n\n      \n    {/* SharePoint Section ends here */}\n\n    <ShowSpinner position={3} />\n      <EnterLeave year={year} racf={currentRacf} superUserMode={superUserMode} leaveType={leaveType} setDisplayAlert={setDisplayAlert} setRefreshPage={setRefreshPage} \n      sharePointID={sharePointID}  sharePointFiles={sharePointFiles}   leaveList={leaveList} setLeaveList={setLeaveList}/>\n\n\n    </Fragment>\n  )\n}\nexport default ApplyLeave\n","import React from \"react\"\r\n\r\nconst Home = props => {\r\n  //const { env } = props\r\n\r\n  return (\r\n    <div className=\"welcome\">\r\n      <div>\r\n         <img src=\"/static/img/vacation.jpeg\" aria-hidden alt=\"MMG Overseas e-Leave\"  style={{ width: \"100%\", height: \"103%\", border: 0 }}  />                 \r\n        {/* {env === \"DEV\" ? <iframe src=\"http://localhost:5000/map-marker\" title=\"map\" style={{ width: \"100%\", height: \"103%\", border: 0 }}></iframe> : <iframe src=\"https://mmgapp3.herokuapp.com/map-marker\" title=\"map\" style={{ width: \"100%\", height: \"103%\", border: 0 }}></iframe>} */}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nexport default Home\r\n","import { React, useState, useEffect, Fragment, useCallback } from \"react\"\r\nimport axios from \"axios\"\r\nimport { trackPromise } from \"react-promise-tracker\"\r\nimport ShowSpinner from \"./components/ShowSpinner\"\r\n\r\n\r\nconst SwitchUser = (props) => {\r\n  \r\n  const {currentRacf,  setCurrentRacf, displayAndLogin, setUserProfile} = props                                     \r\n  const [userList, setUserList] = useState([])\r\n     \r\n  const refreshUserList = useCallback(() => {\r\n\r\n    trackPromise(\r\n      axios({\r\n        url: \"/eleave/api/getUserList\",\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-type\": \"application/json\",\r\n          api: \"yes\"         \r\n        },\r\n        //data: JSON.stringify({\"year\": Number(year), \"racf\":   userProfile.racf} )      \r\n      }\r\n    )\r\n    .then(response => response.data)\r\n    .then(response => {                \r\n    \r\n      let nUserList = response['userList']\r\n      // First sort the array\r\n      nUserList.sort(function (a, b) {\r\n        // note : must change the string back to date object for comparison\r\n        if (a.name < b.name) return -1   // ascening order by name\r\n        else return 1\r\n      })            \r\n      setUserList(nUserList)                    \r\n    })\r\n    .catch(error => {      \r\n      // proper error capturing \r\n      //console.log('***getUserList',error.response.data.error_message)      \r\n      //console.log('***getUserList2',error.response.status)                        \r\n      displayAndLogin({ message: error.response.data.error_message, position: 4, timeout: 4000, color: \"alert__red\" })   \r\n   \r\n    }),\r\n  \"switchUser\"\r\n    )\r\n    return () => {\r\n      setUserList(null) // This worked for me            \r\n    }  \r\n  \r\n  }, [displayAndLogin]  )\r\n \r\n  useEffect(() => {          \r\n    refreshUserList();    \r\n  }, [refreshUserList])\r\n\r\n \r\n  \r\n  const switchSessionUser = (impersonatedUser) => {\r\n\r\n    trackPromise(\r\n      axios({\r\n        url: \"/api/impersonateUser\",\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-type\": \"application/json\",\r\n          api: \"yes\"         \r\n        },\r\n        data: JSON.stringify({impersonatedUser} )      \r\n      }\r\n    )\r\n    .then(response => response.data)\r\n    .then(response => {                \r\n        setUserProfile(response['userProfile'])                \r\n    })\r\n    .catch(error => {      \r\n      displayAndLogin({ message: error.response.data.error_message, position: 4, timeout: 4000, color: \"alert__red\" })   \r\n    }),\r\n  \"switchUser\"\r\n    )\r\n    return () => {\r\n      //setUserList(null) // This worked for me            \r\n    }\r\n  \r\n  }  \r\n\r\n\r\n  //  Handle select year \r\n  const handleSwitchUser = event => {    \r\n        const { value } = event.target    \r\n        const user = userList.filter(x=>x.racf === value)                   \r\n        setCurrentRacf(user[0]['racf'])    \r\n        switchSessionUser(user[0]['racf'])                   \r\n  }       \r\n  \r\n  \r\n  return (\r\n    <Fragment>\r\n      <div>\r\n        <div>                                     \r\n            <div className=\"subHeading\">Impersonate:</div>            \r\n            <div className=\"switchUser_grid\">              \r\n              <div></div>\r\n              <div>\r\n                <select style={{width: '30rem', height:\"1.5rem\"}} onChange={handleSwitchUser} id=\"switchUser\" className=\"clickable\" value={currentRacf || ''} >                \r\n                {/* <option value=\"Select\">Select</option> */}\r\n                {userList && userList.map((x, index) => (\r\n                  <option key={index} value={x.racf}>\r\n                    {x.name} ({x.racf})\r\n                </option>\r\n                ))}      \r\n                </select>\r\n              </div>\r\n              <div></div>              \r\n              </div>         \r\n        \r\n      </div>\r\n      <ShowSpinner position={4} />\r\n    </div>\r\n  </Fragment>\r\n  )\r\n  }\r\n\r\nexport default SwitchUser","import React, { Fragment, useState, useEffect } from \"react\"\n\nconst UserProfile = props => {\n  const { userProfile, setSuperUserMode, superUserMode} = props\n  const [photoURL, setPhotoURL] = useState(\"\")\n  \n  useEffect(() => {\n    setPhotoURL(\"/api/getPhoto/\" + userProfile.email)              \n  }, [userProfile.email])\n\n  const toggleSuperUser  = () => {    \n    setSuperUserMode(!superUserMode)    \n  }        \n  \n  return (\n    <Fragment>\n      \n        <div className={\"userProfile \".concat(userProfile.databaseSchema === 'dev' ? 'userProfile_dev_color' : 'userProfile_prod_color')}>\n            <div className=\"userProfile_d userProfile_grid_d\"><img src=\"static/img/macys-header.jpg\" aria-hidden alt=\"\" width=\"60\" height=\"60\"  /></div>\n            <div className=\"userProfile_e userProfile_grid_e\">e-leave</div>\n            <div className=\"userProfile_b userProfile_grid_b\">{userProfile.userName} </div>  \n            <div className=\"userProfile_c userProfile_grid_c\" >\n                {userProfile.superUser && superUserMode? (\n                    <i className={\"fa fa-superpowers\" +  (userProfile.superUser? \" userProfile_icon \":undefined)}  onClick={() => {toggleSuperUser()}} ></i>\n                ) : <i className={\"fa fa-user \" + (userProfile.superUser? \" userProfile_icon\": undefined)}  onClick={() => {toggleSuperUser()}} ></i>}          \n            </div>        \n          <div className=\"userProfile_a userProfile_grid_a\"><img src={photoURL} aria-hidden alt=\"Searching for photo...\" width=\"60\" height=\"60\" /> </div>   \n        </div>\n      \n    </Fragment>\n  )\n}\n\nexport default UserProfile\n","import { React, useState, useEffect, Fragment, useCallback } from \"react\"\r\nimport axios from \"axios\"\r\nimport { trackPromise } from \"react-promise-tracker\"\r\nimport ShowSpinner from \"./components/ShowSpinner\"\r\n\r\n\r\nconst ApprovalCenter = props => {\r\n  const { currentRacf, setDisplayAlert, superUserMode, convert2MMDDYY, convertToLocal, sharePointPath } = props\r\n\r\n  const [pendingList, setPendingList] = useState([])\r\n\r\n  const [checkedState, setCheckedState] = useState([])\r\n \r\n  const gotoSharePoint = (ref, folder, sharePointID) => {  \r\n    // sharePoint variables : year, sharePointPath, racf and office\r\n\r\n    const year =  ref.substring(3,7) // get the year via the reference no.      \r\n    \r\n    const url = \"https://macysinc.sharepoint.com/sites/MMGOverseas/\".concat(sharePointPath+year, \"/Forms/AllItems.aspx?id=%2Fsites%2FMMGOverseas%2F\", sharePointPath+year, \"%2F\", folder, \"%2F\", \"&FilterType1=Text&viewid=720379f5-eb23-410f-81d1-f4e43a1a1cab&FilterField1=SharePointID&FilterValue1=\", sharePointID, \"&dt=\", new Date().getTime())\r\n       \r\n\r\n    const newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\")\r\n    if (newWindow) newWindow.opener = null\r\n  }\r\n  \r\n  const refreshApprove = useCallback(() => {\r\n\r\n    trackPromise(\r\n      \r\n      axios({\r\n        url: \"/eleave/api/listapprove\",\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-type\": \"application/json\",\r\n          api: \"yes\"\r\n        },\r\n        data: JSON.stringify({ racf: currentRacf })\r\n        //data: JSON.stringify({\"year\": Number(year), \"racf\":   userProfile.racf} )\r\n      })\r\n        .then(response => response.data)\r\n        .then(response => {\r\n          const new_pendingList = response[\"result\"]\r\n          setPendingList(new_pendingList)          \r\n          //console.log(new_pendingList)          \r\n          const new_checkState = new Array(new_pendingList.length).fill(false)\r\n          setCheckedState(new_checkState)\r\n        })\r\n        .catch(error => {\r\n          setDisplayAlert({ message: error.response.data.error_message, position: 4, timeout: 3000, color: \"alert__red\" })\r\n          //console.log(error)\r\n        }),\r\n      \"approvalCenter\"\r\n    )\r\n\r\n    return () => {\r\n      //setUserList(null) // This worked for me\r\n    }\r\n\r\n  \r\n  }, [currentRacf,setDisplayAlert])\r\n \r\n\r\n  useEffect(() => {        \r\n    refreshApprove();\r\n  }, [currentRacf, refreshApprove])\r\n\r\n\r\n  \r\n  // Please note that below function code appears in Approval Center and Cancel Leave in a slightly different way   \r\n  function checkSelection(pendingList, maxSelect) {\r\n\r\n    let num_selected = 0 \r\n    let first_selected = 0 \r\n    const new_pendingList = [...pendingList]    \r\n    let ref_no = \"\" \r\n\r\n    for (let i = 0; i < checkedState.length; i += 1) {\r\n      if (checkedState[i] === true) {\r\n        num_selected++\r\n        if (first_selected === 0) {\r\n            first_selected = num_selected // this is to note the first selected application \r\n            ref_no = new_pendingList[i][\"ref_no\"] \r\n        }     \r\n        if (num_selected > maxSelect) {\r\n          setDisplayAlert({ message: \"select one application at a time please !\", position: 3, timeout: 4000, color: \"alert__red\" } )     \r\n          handleClearAll()           \r\n          return null\r\n        }\r\n      }\r\n    }  \r\n    \r\n    // check if any has been selected\r\n    if (first_selected === 0) {\r\n      setDisplayAlert({ message: \"No application has been selected !\", position: 3, timeout: 4000, color: \"alert__red\" } )    \r\n      return null        \r\n    }\r\n\r\n    return { ref_no : ref_no, pendingList : pendingList}\r\n\r\n  }\r\n\r\n \r\n  const handleOnChange = position => {    \r\n    const updatedCheckedState = checkedState.map((item, index) => (index === position ? !item : item))\r\n    setCheckedState(updatedCheckedState)\r\n  }\r\n\r\n\r\n  const handleApprove = async () => {\r\n\r\n    \r\n    let new_pendingList = [...pendingList]     \r\n    \r\n    // max selection is virtually no limit so in this case so pass 9999 \r\n    const checkSelectionResult = checkSelection(pendingList, 9999 )\r\n\r\n    if ( checkSelectionResult=== null) {\r\n        return null\r\n    }\r\n\r\n    for (let i = 0; i < checkedState.length; i += 1) {\r\n      if (checkedState[i] === true) {\r\n        let options = {\r\n          headers: {\r\n            \"Content-type\": \"application/json\",\r\n            api: \"yes\"\r\n          }\r\n        }\r\n        //  please note currentRacf is the approver \r\n        let data = { refNo: new_pendingList[i][\"ref_no\"], racf: currentRacf, action: \"APPROVE\", superUser: superUserMode, localTime: convertToLocal(Date.now()) }\r\n\r\n        try {\r\n          await trackPromise(axios.post(\"/eleave/api/changestatus\", data, options), \"changeStatus\")\r\n            .then(response => response.data)\r\n            .then(response => {\r\n              // refNo, racf, action - APPROVE, CANCEL,REJECT, false                   \r\n              //console.log(\"Successufully updated\", response)        \r\n      \r\n            })\r\n            .catch(error => {\r\n              //console.log('error from changestatus', error);\r\n              setDisplayAlert({ message: error.response.data.error_message, position: 4, timeout: 3000, color: \"alert__red\" })\r\n            })\r\n        } catch (error) {\r\n          setDisplayAlert({ message: error.response.data.error_message, position: 4, timeout: 5000, color: \"alert__red\" })\r\n        }\r\n      }\r\n    }\r\n    \r\n    setPendingList(new_pendingList)\r\n    handleClearAll()\r\n    refreshApprove()\r\n    return () => {\r\n      //setUserProfile(null)   \r\n\r\n    }\r\n  }\r\n\r\n  const handleReject = async () => {\r\n       \r\n    let new_pendingList = [...pendingList]     \r\n    \r\n    // max selection is virtually no limit so in this case so pass 9999 \r\n    const checkSelectionResult = checkSelection(pendingList, 9999 )\r\n\r\n    if ( checkSelectionResult=== null) {\r\n        return null\r\n    }\r\n\r\n    \r\n    for (let i = 0; i < checkedState.length; i += 1) {\r\n      if (checkedState[i] === true) {\r\n        let options = {\r\n          headers: {\r\n            \"Content-type\": \"application/json\",\r\n            api: \"yes\"\r\n          }\r\n        }\r\n\r\n        let data = { refNo: new_pendingList[i][\"ref_no\"], racf: currentRacf, action: \"REJECT\", superUser: superUserMode, localTime:  convertToLocal(Date.now())  }\r\n\r\n        try {\r\n          await trackPromise(axios.post(\"/eleave/api/changestatus\", data, options), \"changeStatus\")\r\n            .then(response => response.data)\r\n            .then(response => {\r\n              new_pendingList[i][\"approvalStatus\"] = \"REJECT\"\r\n            })\r\n            .catch(error => {\r\n              console.log('error from changestatus', error);\r\n              setDisplayAlert({ message: error.response.data.error_message, position: 4, timeout: 3000, color: \"alert__red\" })\r\n            })\r\n        } catch (error) {\r\n          setDisplayAlert({ message: \"Unexpected error\", position: 4, timeout: 3000, color: \"alert__red\" })\r\n        }\r\n      }\r\n    }\r\n    setPendingList(new_pendingList)\r\n    handleClearAll()\r\n    refreshApprove()\r\n    return () => {\r\n      //setUserProfile(null)\r\n    }\r\n    \r\n  }\r\n\r\n  const handleSelectAll = () => {\r\n    let allApprovalCheckboxes = document.getElementsByName(\"approval\")\r\n    for (var i = 0; i < allApprovalCheckboxes.length; i++) {\r\n      allApprovalCheckboxes[i].checked = true\r\n      checkedState[i] = true\r\n    }\r\n  }\r\n\r\n  const handleClearAll = () => {\r\n    let allApprovalCheckboxes = document.getElementsByName(\"approval\")    \r\n    for (var i = 0; i < allApprovalCheckboxes.length; i++) {\r\n      allApprovalCheckboxes[i].checked = false\r\n      checkedState[i] = false\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <div>\r\n        <div>\r\n          <div className=\"subHeading\">Approval Center</div>\r\n          \r\n          <table id=\"approvalCenter_Table\"> \r\n\r\n              <tr className=\"approvalCenter_grid\">\r\n                <th>Select</th>          \r\n                <th>Ref No.</th>              \r\n                <th>Applicant</th>\r\n                <th>Type</th>\r\n                <th>Status</th>              \r\n                <th>Docs</th>\r\n                <th>&nbsp;</th>\r\n              </tr>                             \r\n\r\n          <tbody>\r\n              \r\n                  {pendingList.map((x, index) => (                    \r\n                      <tr key={index} className=\"approvalCenter_grid\">               \r\n                          <td className=\"approvalCenter_input\">\r\n                            <input type=\"checkbox\" name=\"approval\" value={x.ref} onChange={() => handleOnChange(index)} />\r\n                          </td>\r\n                          <td>{x.ref_no}</td>\r\n                          <td>{x.staff}</td>\r\n                          <td>{x.type}</td>\r\n                          <td>{x.approvalStatus}</td>\r\n                          <td>\r\n                            {/* show document link to SharePoint when the leave is with medical cert */}\r\n                            {x.type_id===\"LVE04\"?(                                                       \r\n                            <i class=\"fa fa-file-text-o\"  onClick={() => {gotoSharePoint(x.ref_no, x.racf, x.sharePointId)}}></i>\r\n                            ): null}                            \r\n                          </td>        \r\n                          <td>                     \r\n                                <tr className=\"approvalCenterInner_grid\">\r\n                                      <th>Working Days</th>          \r\n                                      <th>Calendar Days</th>                                                \r\n                                      <th>Start</th>              \r\n                                      <th>End</th>\r\n                                </tr>                               \r\n                                \r\n                                {x.details.map((y, index2) => (\r\n                                  <tr key={index2} className=\"approvalCenterInner2_grid\">                                  \r\n                                    <td>{y.workday}</td>\r\n                                    <td>{y.calendarDay}</td>                                    \r\n                                    <td>\r\n                                      {convert2MMDDYY(y.startDate)}&nbsp;({y.startTime})\r\n                                    </td>\r\n                                    <td>\r\n                                      {convert2MMDDYY(y.endDate)}&nbsp;({y.endTime})\r\n                                    </td>\r\n                                  </tr>\r\n                                ))}                      \r\n                          </td>    \r\n                        </tr>                  \r\n                  ))}\r\n              \r\n              </tbody>\r\n          </table>   \r\n          <ShowSpinner position={4} />\r\n \r\n            <div className=\"approvalCenter\">\r\n              <button\r\n                className=\"fa fa-dot-circle-o\"\r\n                onClick={() => {\r\n                  handleSelectAll()\r\n                }}\r\n              >\r\n                &nbsp;Select All\r\n              </button>\r\n              <button\r\n                className=\"fa fa-circle-o\"\r\n                onClick={() => {\r\n                  handleClearAll()\r\n                }}\r\n              >\r\n                &nbsp;Clear All\r\n              </button>\r\n              <button\r\n                className=\"fa fa-check\"\r\n                onClick={() => {\r\n                  handleApprove()\r\n                }}\r\n              >\r\n                &nbsp;Approve\r\n              </button>\r\n              <button\r\n                className=\"fa fa-times\"\r\n                onClick={() => {\r\n                  handleReject()\r\n                }}\r\n              >\r\n                &nbsp;Reject\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      \r\n   \r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default ApprovalCenter\r\n","import { React, useState, useEffect, Fragment, useCallback } from \"react\"\r\nimport axios from \"axios\"\r\nimport { trackPromise } from \"react-promise-tracker\"\r\nimport ShowSpinner from \"./components/ShowSpinner\"\r\n\r\nconst CancelLeave = props => {\r\n  const { currentRacf, setDisplayAlert, superUserMode, convert2MMDDYY, convertToLocal } = props \r\n  \r\n  const [pendingList, setPendingList] = useState([])\r\n\r\n  const [checkedState, setCheckedState] = useState([])\r\n\r\n  const refreshCancelLeave = useCallback(() => {\r\n\r\n    trackPromise(\r\n      axios({\r\n        url: \"eleave/api/ListApprovedByYear\",\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-type\": \"application/json\",\r\n          api: \"yes\"\r\n        },\r\n\r\n        data: JSON.stringify({ racf: currentRacf, superUser:superUserMode, localTime: convertToLocal(Date.now())})\r\n      })\r\n        .then(response => response.data)\r\n        .then(response => {                    \r\n          const new_pendingList = response[\"result\"]         \r\n          //console.log('cancel', new_pendingList) \r\n          setPendingList(new_pendingList)\r\n          const new_checkState = new Array(new_pendingList.length).fill(false)\r\n          setCheckedState(new_checkState)\r\n        })\r\n        .catch(error => {\r\n          setDisplayAlert({ message: error.response.data.error_message, position: 4, timeout: 3000, color: \"alert__red\" })\r\n          //console.log(error)          \r\n        }),\r\n\r\n      \"cancelLeave\"\r\n    )\r\n    return () => {\r\n      setPendingList(null) // This worked for me\r\n      setCheckedState(null)\r\n    }\r\n    \r\n\r\n  }, [currentRacf, setDisplayAlert, superUserMode, convertToLocal])\r\n\r\n\r\n  useEffect(() => {\r\n    refreshCancelLeave()\r\n  }, [currentRacf, refreshCancelLeave])\r\n\r\n\r\n  const handleOnChange = position => {\r\n    const updatedCheckedState = checkedState.map((item, index) => (index === position ? !item : item))\r\n    setCheckedState(updatedCheckedState)\r\n  }\r\n\r\n\r\n  // Please note that below function code appears in Approval Center and Cancel Leave in a slightly different way   \r\n  function checkSelection(pendingList, maxSelect) {\r\n\r\n    let num_selected = 0 \r\n    let first_selected = 0 \r\n    const new_pendingList = [...pendingList]    \r\n    let ref_no = \"\" \r\n\r\n    for (let i = 0; i < checkedState.length; i += 1) {\r\n      if (checkedState[i] === true) {\r\n        num_selected++\r\n        if (first_selected === 0) {\r\n            first_selected = num_selected // this is to note the first selected application \r\n            ref_no = new_pendingList[i][\"ref_no\"] \r\n        }     \r\n        if (num_selected > maxSelect) {\r\n          setDisplayAlert({ message: \"select one application at a time please !\", position: 3, timeout: 4000, color: \"alert__red\" } )     \r\n          handleClearAll()           \r\n          return null\r\n        }\r\n      }\r\n    }  \r\n    \r\n    // check if any has been selected\r\n    if (first_selected === 0) {\r\n      setDisplayAlert({ message: \"No application has been selected !\", position: 3, timeout: 4000, color: \"alert__red\" } )    \r\n      return null        \r\n    }\r\n\r\n    return { ref_no : ref_no, pendingList : pendingList}\r\n\r\n  }\r\n\r\n\r\n\r\n  const handleCancel = async () => {\r\n\r\n    let new_pendingList = [...pendingList]     \r\n    \r\n    // max selection is virtually no limit so in this case so pass 9999 \r\n    const checkSelectionResult = checkSelection(pendingList, 9999 )\r\n\r\n    if ( checkSelectionResult=== null) {\r\n        return null\r\n    }\r\n    \r\n    if (!window.confirm('Are you sure you want to cancel?')) {         \r\n      return null     \r\n    }\r\n\r\n    for (let i = 0; i < checkedState.length; i += 1) {\r\n        if (checkedState[i] === true) {\r\n          let options = {\r\n            headers: {\r\n              \"Content-type\": \"application/json\",\r\n              api: \"yes\"\r\n            }\r\n        }\r\n\r\n        let data = { refNo: new_pendingList[i][\"ref_no\"], racf: new_pendingList[i][\"racf\"], action: \"CANCEL\", superUser: superUserMode, localTime: convertToLocal(Date.now()) }\r\n\r\n        try {\r\n          await trackPromise(axios.post(\"/eleave/api/changestatus\", data, options), \"changeStatus\")\r\n            .then(response => response.data)\r\n            .then(response => {\r\n              // refNo, racf, action - APPROVE, CANCEL,REJECT, false\r\n              new_pendingList[i][\"approvalStatus\"] = \"CANCEL\"                  \r\n            })\r\n            .catch(error => {   \r\n              setDisplayAlert({ message: new_pendingList[i][\"ref_no\"] + \" : \" + error.response.data.error_message, position: 4, timeout: 3000, color: \"alert__red\" })                                          \r\n            })\r\n        } catch (error) {\r\n          setDisplayAlert({ message: error.response.data.error_message, position: 0, timeout: 3000, color: \"alert__red\" })\r\n\r\n        }\r\n      }\r\n    }\r\n    setPendingList(new_pendingList) \r\n    handleClearAll()    \r\n    refreshCancelLeave()\r\n    return () => {\r\n      setCheckedState(null)\r\n      setPendingList(null)\r\n    }\r\n  }\r\n\r\n  const handleSelectAll = () => {\r\n    let allApprovalCheckboxes = document.getElementsByName(\"cancel\")\r\n    for (var i = 0; i < allApprovalCheckboxes.length; i++) {\r\n      allApprovalCheckboxes[i].checked = true\r\n      checkedState[i] = true\r\n    }\r\n  }\r\n\r\n  const handleClearAll = () => {\r\n    let allApprovalCheckboxes = document.getElementsByName(\"cancel\")\r\n    for (var i = 0; i < allApprovalCheckboxes.length; i++) {\r\n      allApprovalCheckboxes[i].checked = false\r\n      checkedState[i] = false\r\n    }\r\n  }\r\n\r\n   \r\n  const handlePrintReference = async () => {\r\n\r\n    let new_pendingList = null \r\n    let ref_no  = null \r\n    // max selection is 1 in this case so pass 1 \r\n    const checkSelectionResult = checkSelection(pendingList, 1 )\r\n\r\n    if ( checkSelectionResult=== null) {\r\n        return null\r\n    }\r\n    else\r\n    {\r\n      new_pendingList = checkSelectionResult['new_pendingList']\r\n      ref_no = checkSelectionResult['ref_no']\r\n    }\r\n\r\n    try {\r\n            // \"12/2/22 by VC\" - Below is a sample for Billy Chan to build a report   \r\n            const file_name = \"Leave Record for \" + ref_no + \" (\" + currentRacf + \").xlsx\"            \r\n            //alert(\"Printing of \"+ file_name + \" will be coming soon....\")\r\n                        \r\n             const response = await trackPromise(\r\n               fetch(\"/eleave/api/printapply\", {\r\n                 method: \"POST\",\r\n                 headers: {\r\n                   \"Content-Type\": \"application/octet-stream\",\r\n                   \"Content-Disposition\": \"attachment\",\r\n                   \"Cache-Control\": \"no-cache\",\r\n                   \"localTime\": JSON.stringify(convertToLocal(Date.now())),\r\n                   \"parameters\": JSON.stringify({ racf: currentRacf,  ref: ref_no})          \r\n                 }\r\n    \r\n             }), \"printApply\")    \r\n    \r\n             if (!response.ok) {\r\n               const data = await response.text();   \r\n               const msg = JSON.parse(data).error_message          \r\n               setDisplayAlert({ message: msg, position: 3, timeout: 4000, color: \"alert__red\" } )           \r\n               }\r\n             else {\r\n               const data = await response.blob();          \r\n               //Create blob link to download\r\n               const url = window.URL.createObjectURL(data)\r\n               const link = document.createElement(\"a\")\r\n               link.href = url  \r\n            //   // Give a name of the file \r\n               link.setAttribute(\"download\", file_name)\r\n               document.body.appendChild(link)\r\n               link.click()\r\n               link.parentNode.removeChild(link)           \r\n             }\r\n            // make sure we return something back from the API     \r\n            return null\r\n    \r\n    }\r\n    catch {               \r\n          setDisplayAlert({ message: \"The summary seems no data !  Please check !\", position: 3, timeout: 4000, color: \"alert__red\" })                \r\n    }\r\n    setPendingList(new_pendingList) \r\n    handleClearAll()        \r\n    return () => {\r\n      setCheckedState(null)\r\n      setPendingList(null)    \r\n     }\r\n  } \r\n\r\n  return (\r\n    <Fragment>\r\n      <div>\r\n        <div>\r\n          <div className=\"subHeading\">Cancel & Print</div>\r\n            \r\n            <table id=\"cancelLeave_Table\"> \r\n\r\n                <tr className=\"cancelLeave_grid\">\r\n                  <th>Select</th>          \r\n                  <th>Ref No.</th>              \r\n                  <th>Applicant</th>\r\n                  <th>Type</th>\r\n                  <th>Status</th>              \r\n                  <th>&nbsp;</th>\r\n                </tr>                             \r\n\r\n              \r\n                {pendingList.map((x, index) => (                    \r\n                      <tr key={index} className=\"cancelLeave_grid\">               \r\n                          <td className=\"cancelLeave_input\">\r\n                            <input type=\"checkbox\" name=\"cancel\" value={x.ref} onChange={() => handleOnChange(index)} />\r\n                          </td>\r\n                          <td>{x.ref_no}</td>\r\n                          <td>{x.staff}</td>\r\n                          <td>{x.type}</td>\r\n                          <td>{x.approvalStatus}</td>\r\n                          <td>                     \r\n                                <tr className=\"cancelLeaveInner_grid\">\r\n                                      <th>Working Days</th>          \r\n                                      <th>Calendar Days</th>                                                \r\n                                      <th>Start</th>              \r\n                                      <th>End</th>\r\n                                </tr>                               \r\n                                \r\n                                {x.details.map((y, index2) => (\r\n                                  <tr key={index2} className=\"cancelLeaveInner2_grid\">                                                                      \r\n                                    <td>{y.workday}</td>\r\n                                    <td>{y.calendarDay}</td>\r\n                                    <td>\r\n                                      {convert2MMDDYY(y.startDate)}&nbsp;({y.startTime})\r\n                                    </td>\r\n                                    <td>\r\n                                      {convert2MMDDYY(y.endDate)}&nbsp;({y.endTime})\r\n                                    </td>\r\n                                  </tr>\r\n                                ))}                      \r\n                          </td>    \r\n                        </tr>                  \r\n                  ))}\r\n\r\n\r\n          </table>   \r\n\r\n          <ShowSpinner position={4} />\r\n\r\n\r\n            <div className=\"cancelLeave\">\r\n              <button\r\n                className=\"fa fa-dot-circle-o\"\r\n                onClick={() => {\r\n                  handleSelectAll()\r\n                }}\r\n              >\r\n                &nbsp;Select All\r\n              </button>\r\n              <button\r\n                className=\"fa fa-circle-o\"\r\n                onClick={() => {\r\n                  handleClearAll()\r\n                }}\r\n              >\r\n                &nbsp;Clear All\r\n              </button>\r\n              <button\r\n                className=\"fa fa-check\"\r\n                onClick={() => {\r\n                  handleCancel()\r\n                }}\r\n              >\r\n                &nbsp;Cancel\r\n              </button>\r\n              <button\r\n                className=\"fa fa-book\"\r\n                onClick={() => {\r\n                  handlePrintReference()\r\n                }}\r\n              >\r\n                &nbsp;Print Reference\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default CancelLeave\r\n","import { React, useState, useEffect, Fragment, useCallback } from \"react\"\r\nimport axios from \"axios\"\r\nimport { trackPromise } from \"react-promise-tracker\"\r\nimport ShowSpinner from \"./components/ShowSpinner\"\r\n\r\nconst PartnersLeave = props => {\r\n  const { currentRacf, setDisplayAlert,  convert2MMDDYY, convertToLocal } = props \r\n  \r\n  const [pendingList, setPendingList] = useState([])\r\n\r\n  function sortPendingList(list, order) {    \r\n    const nList = list  \r\n    if (order === \"asc\") {\r\n      nList.sort(function (a, b) {\r\n        return a.racf > b.racf ? 1 : -1\r\n      })\r\n    } else if (order === \"desc\") {\r\n      nList.sort(function (a, b) {\r\n        return a.racf < b.racf ? 1 : -1\r\n      })\r\n    }\r\n    return nList\r\n  }\r\n\r\n\r\n  const refreshPartnersLeave = useCallback(() => {\r\n\r\n    if (!currentRacf) {\r\n       return\r\n    }\r\n\r\n    trackPromise(\r\n      axios({\r\n        url: \"eleave/api/partnersleave\",\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-type\": \"application/json\",\r\n          api: \"yes\"\r\n        },\r\n        data: JSON.stringify({ racf: currentRacf, localTime: convertToLocal(Date.now())})\r\n      })\r\n        .then(response => response.data)\r\n        .then(response => {                    \r\n          const new_pendingList = response[\"result\"]              \r\n          setPendingList(sortPendingList(new_pendingList, \"asc\"))                    \r\n        })\r\n        .catch(error => {\r\n          setDisplayAlert({ message: error.response.data.error_message, position: 4, timeout: 3000, color: \"alert__red\" })\r\n          //console.log(error)          \r\n        }),\r\n      \"partnersLeave\"\r\n    )\r\n    return () => {\r\n      setPendingList(null) // This worked for me      \r\n    }\r\n    \r\n\r\n  }, [currentRacf, setDisplayAlert, convertToLocal])\r\n\r\n\r\n  useEffect(() => {\r\n    refreshPartnersLeave()\r\n  }, [currentRacf, refreshPartnersLeave])\r\n\r\n\r\n  return (\r\n    <Fragment>\r\n      <div>\r\n        <div>\r\n          <div className=\"subHeading\">Partners Status in 2 Weeks</div>\r\n            \r\n            <table id=\"partnersLeave_Table\"> \r\n\r\n                <tr className=\"partnersLeave_grid\">                  \r\n                  <th>Ref No.</th>              \r\n                  <th>Applicant</th>\r\n                  <th>Type</th>\r\n                  <th>Status</th>              \r\n                  <th>&nbsp;</th>\r\n                </tr>                             \r\n\r\n              \r\n                {pendingList && pendingList.map((x, index) => (                    \r\n                      <tr key={index} className=\"partnersLeave_grid\">                                         \r\n                          <td>{x.ref_no}</td>\r\n                          <td>{x.staff}</td>\r\n                          <td>{x.type}</td>\r\n                          <td>{x.approvalStatus}</td>\r\n                          <td>                     \r\n                                <tr className=\"partnersLeaveInner_grid\">\r\n                                      <th>Working Days</th>          \r\n                                      <th>Calendar Days</th>                                                \r\n                                      <th>Start</th>              \r\n                                      <th>End</th>\r\n                                </tr>                               \r\n                                \r\n                                {x.details && x.details.map((y, index2) => (\r\n                                  <tr key={index2} className=\"partnersLeaveInner2_grid\">                                                                      \r\n                                    <td>{y.workday}</td>\r\n                                    <td>{y.calendarDay}</td>\r\n                                    <td>\r\n                                      {convert2MMDDYY(y.startDate)}&nbsp;({y.startTime})\r\n                                    </td>\r\n                                    <td>\r\n                                      {convert2MMDDYY(y.endDate)}&nbsp;({y.endTime})\r\n                                    </td>\r\n                                  </tr>\r\n                                ))}                      \r\n                          </td>    \r\n                        </tr>                  \r\n                  ))}\r\n\r\n\r\n          </table>   \r\n\r\n          <ShowSpinner position={4} />            \r\n          </div>\r\n        </div>\r\n\r\n\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default PartnersLeave\r\n","import { Route, Routes, HashRouter as Router, Link } from \"react-router-dom\"\nimport React, { useState, useEffect, useCallback } from \"react\"\nimport axios from \"axios\"\nimport ApplyLeave from \"./ApplyLeave\"\nimport Home from \"./Home\"\nimport SwitchUser from \"./SwitchUser\"\nimport UserProfile from \"./components/UserProfile\"\nimport { trackPromise } from \"react-promise-tracker\"\nimport ApprovalCenter from \"./ApprovalCenter\"\nimport CancelLeave from \"./CancelLeave\"\nimport PartnersLeave from \"./PartnersLeave\"\nimport ShowAlert from \"./components/ShowAlert\"\n\nconst logout = () => {\n  localStorage.clear()\n  window.location = \"/logout\"\n}\n\nconst gotoPowerBI = () => {  \n  const url = \"https://app.powerbi.com/reportEmbed?reportId=a1e9a85b-a97c-42d0-9305-f283e64cd79a&autoAuth=true&filterPanelEnabled=False&pageName=ReportSectionf1be12cf083e1c0eba15\"\n  \n  const newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\")\n  if (newWindow) newWindow.opener = null\n}\n\nconst App = () => {\n  const [userProfile, setUserProfile] = useState({})    \n  const [currentRacf, setCurrentRacf] = useState(null)\n  const [superUser, setSuperUser] = useState(false)  \n  const [superUserMode, setSuperUserMode] = useState(false)  \n  const [alert, setAlert] = useState({ position: 100 }) \n\n  // SharePoint\n  const [sharePointPath, setSharePointPath] = useState(\"\") \n\n  const login = () => {\n    //localStorage.clear()\n    window.location = \"/login\"\n  }\n\n    \n  const setDisplayAlert = useCallback((alert_in) => {\n      // alert comes in as { message: \"hi\", position: 0, timeout: 3000, color: \"alert__green\" }      \n      setAlert(alert_in)\n      setTimeout(function () {\n        // Following is to remove alert message off from screen  \n        setAlert({ position: 100 })\n      }, alert_in.timeout)\n   },[])\n  \n   const displayAndLogin = useCallback((msg) => {\n    const _alert = {...msg, message:msg.message + \" Now, taking you to the login page...\"}\n    setDisplayAlert(_alert);\n    setTimeout(() => { \n      login();\n    }, msg.timeout)\n  }, [setDisplayAlert])\n\n \n  useEffect(() => {\n    trackPromise(\n      axios({\n        url: \"/api/getUserProfile\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          api: \"yes\"\n        }\n        //data: JSON.stringify({})   seems like this line has to be removed to avoid error from Heroku as this line is passing empty parameter.\n      })\n        .then(response => response.data)\n        .then(response => {\n          setUserProfile(response[\"userProfile\"])          \n          setCurrentRacf(response[\"userProfile\"]['racf'])\n          setSuperUser(response[\"userProfile\"]['superUser'])               \n          setSharePointPath(response[\"sharePointPath\"])          \n        })\n        .catch(error => {\n          console.log(error)\n        })\n    )\n  }, [])\n\n\n    // Convert to MM/DD/YY\n  function convert2MMDDYY(iso_date) {\n      let new_date =  iso_date.slice(0, 10).split('-')\n      new_date = new_date[1] + \"/\" + new_date[2] + \"/\" + new_date[0][2] + new_date[0][3]\n      return new_date\n  } \n  \n    // convert to local time\n  function convertToLocal(date) {\n      //const t = new Date(date).toTimeString()\n      const d = new Date(date).toDateString()\n      var local = d \n      //var local = d + \" \" + t\n      //var local_end = local.search(\"GMT+\") - 1\n      //local = local.substring(0, local_end)\n      //console.log('local time',local)\n      return local\n  }\n  \n\n    // convert to local time\n  function convertToLocalTime(date) {\n      const t = new Date(date).toTimeString()\n      const d = new Date(date).toDateString()\n      var local = d + \" \" + t\n      var local_end = local.search(\"GMT+\") - 1\n      local = local.substring(0, local_end)\n      //console.log('local time',local)\n      return local\n  }\n   \n  return (\n    <div className=\"container\">\n      <div className=\"flex-row\">\n        <div className=\"flex-large\">\n          <UserProfile userProfile={userProfile} setSuperUserMode={setSuperUserMode} superUser={superUser} superUserMode={superUserMode}   />\n          <Router>\n            <nav>\n              <ul className=\"app_header\">                \n                <li>\n                  <Link to=\"/\" className=\"link\" > \n                    Home \n                  </Link>\n                </li>      \n                <li>\n                  <Link to=\"/ApplyLeave\" className=\"link\" >\n                    Apply Leave  \n                  </Link>\n                </li>                \n                <li>\n                  <Link to=\"/CancelLeave\" className=\"link\" > \n                    Cancel & Print \n                  </Link>\n                </li>\n                <li>\n                  <Link to=\"/ApprovalCenter\" className=\"link\" > \n                    Approval Center\n                  </Link>\n                </li>             \n                <li>\n                  <Link to=\"/PartnersLeave\" className=\"link\">\n                    Partners Status\n                  </Link>\n                </li>          \n\n                {superUser ? (\n                <li>\n                  <Link to=\"/SwitchUser\" className=\"link\" > \n                    Switch User  \n                  </Link>\n                </li>                                \n                ) : null}\n\n                {superUser ? (\n                  <li\n                    className=\"link\"\n                    onClick={() => {\n                      gotoPowerBI()\n                    }}\n                  >\n                    Power BI\n                  </li>\n                ) : null}\n\n                <button\n                  className=\"fa fa-sign-out\"\n                  onClick={() => {\n                    logout()\n                  }}\n                >\n                  Logout\n                </button>                \n              </ul>\n            </nav>\n            {alert.position === 3 ? (\n                <div className=\"flex-row\">\n                    <div className=\"flex-large\">\n                      <ShowAlert alert={alert} />\n                    </div>\n                </div>\n            ) : null}\n            <Routes>\n              \n              <Route path=\"/\" element={<Home env={userProfile.environment}  currentRacf={currentRacf} />} />\n              \n              <Route path=\"/PartnersLeave\" element={<PartnersLeave currentRacf={currentRacf}  setDisplayAlert={setDisplayAlert}  convert2MMDDYY={convert2MMDDYY}  convertToLocal={convertToLocal} />} />\n              \n              <Route path=\"/ApplyLeave\" element={<ApplyLeave currentRacf={currentRacf}  superUserMode={superUserMode} setDisplayAlert={setDisplayAlert} userProfile={userProfile}  \n                  convert2MMDDYY={convert2MMDDYY}  sharePointPath={sharePointPath} convertToLocalTime={convertToLocalTime} alert={alert} />} />\n\n              <Route path=\"/ApprovalCenter\" element={<ApprovalCenter currentRacf={currentRacf} setDisplayAlert={setDisplayAlert} superUserMode={superUserMode}   convert2MMDDYY={convert2MMDDYY}\n                convertToLocal={convertToLocal} sharePointPath={sharePointPath}\n              />} />\n              <Route path=\"/CancelLeave\" element={<CancelLeave currentRacf={currentRacf}  setDisplayAlert={setDisplayAlert}  superUserMode={superUserMode}  convert2MMDDYY={convert2MMDDYY} \n                convertToLocal={convertToLocal}              \n              />} />\n              <Route path=\"/SwitchUser\" element={<SwitchUser   currentRacf={currentRacf}  setCurrentRacf = {setCurrentRacf} displayAndLogin={displayAndLogin} setUserProfile={setUserProfile} />} />\n\n            </Routes>\n          </Router>\n        </div>\n        \n      </div>\n\n    </div>\n  )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./css/applyLeave.css\"\nimport \"./css/main.css\"\nimport \"./css/index.css\"\nimport \"./css/userProfile.css\"\nimport \"./css/react-datepicker.css\"\nimport \"./css/app.css\"\nimport \"./css/switchUser.css\"\nimport \"./css/selectType.css\"\nimport \"./css/enterLeave.css\"\nimport \"./css/approvalCenter.css\"\nimport \"./css/cancelLeave.css\"\nimport \"./css/partnersLeave.css\"\n\n// for SharePoint\nimport \"./css/sharePoint/sharePoint.css\"\nimport \"./css/sharePoint/showSharePointFiles.css\"\nimport \"./css/sharePoint/uploadDoc.css\"\nimport \"./css/sharePoint/uploadResult.css\"\n\n\nimport App from \"./App\"\n\nReactDOM.render(<App />, document.getElementById(\"root\"))\n"],"sourceRoot":""}