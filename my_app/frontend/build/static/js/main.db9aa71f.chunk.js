(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{153:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(25),c=a.n(n),s=(a(66),a(67),a(68),a(69),a(70),a(71),a(72),a(73),a(74),a(75),a(76),a(77),a(78),a(79),a(80),a(81),a(24)),i=a(5),l=a(18),o=a(6),d=a(8),j=a.n(d),u=a(9),h=a(14),b=a(1),p=function(e){var t=e.alert,a="alert ".concat(t.color);return Object(b.jsx)("h5",{className:a,children:t.message})},f=a(7),O=a(58),m=function(e){var t=Object(f.usePromiseTracker)({area:e.area}).promiseInProgress,a=e.spinnerMessage;return t&&Object(b.jsxs)("div",{style:{marginTop:"0.5rem",width:"100%",height:"30",display:"flex",justifyContent:"center",alignItems:"center",color:"green",fontWeight:"bold"},children:[a,Object(b.jsx)(O.a,{color:"green",height:30,width:100})]})},v=function(e){var t=e.position;return Object(b.jsxs)(r.Fragment,{children:[1===t?Object(b.jsx)(m,{area:"getUserProfile",spinnerMessage:"Loading your profile, please wait... "}):null,2===t?Object(b.jsx)("div",{children:Object(b.jsx)(m,{area:"dummy",spinnerMessage:"Preparing the summary, please wait... "})}):null,3===t?Object(b.jsxs)("div",{children:[Object(b.jsx)(m,{area:"typeOfLeave",spinnerMessage:"Validating the input, please wait... "}),Object(b.jsx)(m,{area:"printSummary",spinnerMessage:"Generating the Leave Summary, please wait... "})]}):null,4===t?Object(b.jsxs)("div",{children:[Object(b.jsx)(m,{area:"switchUser",spinnerMessage:"Switching the user, please wait... "}),Object(b.jsx)(m,{area:"approvalCenter",spinnerMessage:"Loading approval details, please wait... "}),Object(b.jsx)(m,{area:"cancelLeave",spinnerMessage:"Loading applied leave details, please wait... "}),Object(b.jsx)(m,{area:"changeStatus",spinnerMessage:"Updating status, please wait... "}),Object(b.jsx)(m,{area:"getSharePoint",spinnerMessage:"Getting SharePoint list, please wait... "}),Object(b.jsx)(m,{area:"deleteSharePoint",spinnerMessage:"Deleting SharePoint files, please wait... "}),Object(b.jsx)(m,{area:"uploadSharePoint",spinnerMessage:"Uploading SharePoint files, please wait... "}),Object(b.jsx)(m,{area:"downloadSharePoint",spinnerMessage:"Downloading SharePoint files, please wait... "}),Object(b.jsx)(m,{area:"partnersLeave",spinnerMessage:"Loading partners leave details, please wait... "})]}):null]})},x=function(e){var t=e.setDisplayAlert,a=e.userProfile,n=e.leaveType,c=e.setLeaveType,s=e.year,l=e.setYear,o=e.currentRacf,d=e.refreshPage,u=e.convert2MMDDYY,h=e.setLeaveList,p=Object(r.useState)(""),O=Object(i.a)(p,2),m=O[0],x=O[1],g=Object(r.useState)(""),y=Object(i.a)(g,2),_=y[0],P=y[1],S=Object(r.useState)([]),N=Object(i.a)(S,2),k=N[0],D=N[1];Object(r.useEffect)((function(){if(a.years){var e=JSON.parse(a.years),t=e.year,r=Object.keys(t).length,i=Object.values(t)[r-1];s||l(i),n||c("LVE01");for(var o=[],d=0;d<r;d++)o.push({year:Object.values(t)[d],desc:e.period[d]});D(o)}}),[a.years,n,s,c,l]),Object(r.useEffect)((function(){if(s&&n){var e=a.entitlement.filter((function(e){return e.year===Number(s)}));if(0!==e.length){if("LVE01"===n){var t=(Number(s)-1).toString(),r=e[0].carry_forward.toString(),c=e[0].annual_entitlement.toString();P(r+" ("+t+")  +  "+c+" ("+s+")")}else if("LVE02"===n){var i=e[0].casual_entitlement.toString();P("("+i+") "+s)}return Object(f.trackPromise)(j()({url:"/eleave/api/listleave",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({year:Number(s),racf:o})}).then((function(e){return e.data})).then((function(e){var t=e.result[0].header.filter((function(e){return e.leaveTypeId===n}));x(t[0])})).catch((function(e){console.log(e)})),"typeOfLeave"),function(){x({})}}}}),[s,n,a,P,t,o,d]);try{a.staff.name}catch(w){window.location="/login"}return Object(b.jsxs)(r.Fragment,{children:[Object(b.jsx)("div",{children:Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"separator",children:"Applicant Details"}),Object(b.jsxs)("div",{className:"emp_grid",children:[Object(b.jsxs)("div",{className:"emp_area_a emp_grid_a",children:[Object(b.jsx)("div",{children:"Name: "}),Object(b.jsx)("div",{children:a.staff.name})]}),Object(b.jsxs)("div",{className:"emp_area_b emp_grid_b",children:[Object(b.jsx)("div",{children:"Position:"}),Object(b.jsx)("div",{children:a.staff.position})]}),Object(b.jsxs)("div",{className:"emp_area_c emp_grid_c",children:[Object(b.jsx)("div",{children:"Division/Department: "}),Object(b.jsx)("div",{children:a.staff.dept})]}),Object(b.jsxs)("div",{className:"emp_area_d emp_grid_d",children:[Object(b.jsx)("div",{children:"Date Joined:"}),Object(b.jsx)("div",{children:u(a.staff.date_join)})]})]}),Object(b.jsx)("div",{className:"separator",children:"Choose Leave Type"}),Object(b.jsxs)("div",{className:"type_grid",children:[Object(b.jsxs)("div",{className:"type_area_a type_grid_a",children:[Object(b.jsx)("div",{children:"Select Leave Type:"}),Object(b.jsx)("div",{children:Object(b.jsxs)("select",{style:{width:"30rem"},onChange:function(e){var t=e.target.value;h([]),c(t)},id:"selectLeaveTypeOption",className:"clickable",value:n,children:[Object(b.jsx)("option",{value:"LVE01",children:"Annual Leave"}),"DEL"===a.staff.office||"FLR"===a.staff.office?Object(b.jsx)("option",{value:"LVE02",children:"Casual/Festivities Leave"}):null,Object(b.jsx)("option",{value:"LVE03",children:"Work from Home"}),Object(b.jsx)("option",{value:"LVE04",children:"Sick Leave With Medical Cert"}),Object(b.jsx)("option",{value:"LVE05",children:"Sick Leave Without Medical Cert"})]})})]}),Object(b.jsx)("div",{className:"type_area_b type_grid_b",style:{borderBottom:"2px solid gray",marginLeft:0,marginRight:0},children:Object(b.jsx)("div",{children:"Annual Leave Balance"})}),Object(b.jsxs)("div",{className:"type_area_c type_grid_c",children:[Object(b.jsx)("div",{children:"Leave Calendar Year:"}),Object(b.jsx)("div",{children:Object(b.jsx)("select",{style:{width:"30rem"},onChange:function(e){var r=e.target.value;0===a.entitlement.filter((function(e){return e.year===Number(r)})).length&&t({message:"Year "+String(r)+" is not available !",position:1,timeout:3e3,color:"alert__red"}),l(r)},id:"selectYearOption",className:"clickable",value:s,children:k.map((function(e,t){return Object(b.jsx)("option",{value:e.year,children:e.desc},t)}))})})]}),Object(b.jsxs)("div",{className:"type_area_f type_grid_f",children:[Object(b.jsx)("div",{children:"Days Entitled For The Period: "}),Object(b.jsx)("div",{children:"LVE01"===n||"LVE02"===n?_:"N/A"})]}),Object(b.jsxs)("div",{className:"type_area_d type_grid_d",children:[Object(b.jsx)("div",{children:"Days Already Taken (Approved + Pending): "}),Object(b.jsx)("div",{children:isNaN(m.taken+m.pending)?"N/A":m.taken+m.pending+" ("+m.taken+" + "+m.pending+")"})]}),Object(b.jsxs)("div",{className:"type_area_e type_grid_e",children:[Object(b.jsx)("div",{children:"# of Days Left: "}),Object(b.jsx)("div",{children:"LVE01"===n||"LVE02"===n?m.balance:"N/A"})]})]})]})}),Object(b.jsx)(v,{position:10})]})},g=a(13),y=a(45),_=a.n(y),P=a(160),S=function(e){var t=e.year,a=e.racf,n=e.superUserMode,c=e.leaveType,l=e.setDisplayAlert,o=e.setRefreshPage,d=e.sharePointID,u=e.sharePointFiles,h=e.leaveList,p=e.setLeaveList,O=Object(r.useState)(""),m=Object(i.a)(O,2),x=m[0],y=m[1],S=Object(r.useState)(""),N=Object(i.a)(S,2),k=N[0],D=N[1],w=Object(r.useState)("Full Day"),L=Object(i.a)(w,2),C=L[0],T=L[1],M=Object(r.useState)("Full Day"),F=Object(i.a)(M,2),A=F[0],E=F[1],U=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],R=function(e,t){if(e){var a=6e4*e.getTimezoneOffset(),r=new Date(e.getTime()-a);1===t?(y(r.toISOString().substring(0,10)),D(r.toISOString().substring(0,10))):D(r.toISOString().substring(0,10))}},I=function(e){var t=e;if(""!==t){var a=6e4*(t=new Date(e)).getTimezoneOffset();return t=new Date(t.getTime()+a)}},Y=function(e){return e.slice(5,7)+"/"+e.slice(8,10)+"/"+e.slice(2,4)},J=function(e){if(x===k&&("Full Day"===C?"PM":C)>("Full Day"===A?"PM":A))l({message:"Please check your time period!",position:1,timeout:3e3,color:"alert__red"});else if(x>k)l({message:"Your start date of application is earlier than your end date!",position:1,timeout:3e3,color:"alert__red"});else{var r,i=Object(g.a)(h);r=e?Object(g.a)(h):i.concat({id:Object(P.a)(),startLeaveDate:x,startPeriod:C,endLeaveDate:k,endPeriod:A});var b=[],O=[];r.forEach((function(e){b.push({startDate:e.startLeaveDate,startTime:"Full Day"===e.startPeriod?"AM":e.startPeriod,endDate:e.endLeaveDate,endTime:"Full Day"===e.endPeriod?"PM":e.endPeriod}),O.push({startDate:e.startLeaveDate,startTime:e.startPeriod,endDate:e.endLeaveDate,endTime:e.endPeriod})}));var m={year:Number(t),racf:a,type:c,applying:b,applyingScreen:O,superUser:n,sharePointId:"LVE04"===c?d:"",updateDB:e};if(0!==u.length||"LVE04"!==c)return r?(Object(f.trackPromise)(j()({url:"/eleave/api/applyleave",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify(m)}).then((function(e){return e.data})).then((function(t){if(e)l({message:"Application submitted.  Please wait for approval from your people leader",position:4,timeout:4e3,color:"alert__green"}),p([]),o((function(e){return!e}));else{var a=t.result[0].calendarDay,n=t.result[0].workday,c=h.length,i=Object(g.a)(r)[c];r[c]=Object(s.a)(Object(s.a)({},i),{},{calendarDay:a,workday:n}),p(r)}})).catch((function(e){console.log("Error status",e.response.status,e.response.data.error_message),e.response.data.error_message.includes("Incorrect parameters")?l({message:"It seems you haven't had a single leave entry",position:1,timeout:4e3,color:"alert__red"}):l({message:e.response.data.error_message,position:4,timeout:4e3,color:"alert__red"})})),"typeOfLeave"),function(){}):void 0;l({message:"Please upload medical document!",position:1,timeout:4e3,color:"alert__red"})}};return Object(b.jsxs)(r.Fragment,{children:[Object(b.jsx)("div",{children:Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"separator",children:"Apply Leave"}),Object(b.jsxs)("div",{className:"enterLeave_grid_c",children:[Object(b.jsx)("div",{children:"Start Date"}),Object(b.jsx)(_.a,{className:"datePicker",dateFormat:"MM/dd/yy",selected:I(x),onChange:function(e){return R(e,1)}}),Object(b.jsxs)("select",{onChange:function(e){var t=e.target.value;T(t)},id:"enterLeave_startPeriod",className:"clickable",value:C,children:[Object(b.jsx)("option",{value:"Full Day",children:"Full Day"}),Object(b.jsx)("option",{value:"AM",children:"AM"}),Object(b.jsx)("option",{value:"PM",children:"PM"})]}),Object(b.jsx)("div",{children:"End Date"}),Object(b.jsx)(_.a,{className:"datePicker",dateFormat:"MM/dd/yy",selected:I(k),onChange:function(e){return R(e,2)}}),Object(b.jsxs)("select",{onChange:function(e){var t=e.target.value;E(t)},id:"enterLeave_endPeriod",className:"clickable",value:A,children:[Object(b.jsx)("option",{value:"Full Day",children:"Full Day"}),Object(b.jsx)("option",{value:"AM",children:"AM"}),Object(b.jsx)("option",{value:"PM",children:"PM"})]}),Object(b.jsx)("button",{id:"addLeave",onClick:function(){J(!1)},children:"Insert"}),Object(b.jsx)("button",{id:"clearLeave",onClick:function(){y(""),D(""),T("Full Day"),E("Full Day")},children:"Clear"}),h.length>0?Object(b.jsx)("button",{id:"submitLeave",onClick:function(){J(!0)},children:"Submit"}):null]}),Object(b.jsxs)("table",{id:"enterLeaveTable",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{className:"enterLeave_grid_a",children:[Object(b.jsx)("th",{children:"Start Date"}),Object(b.jsx)("th",{children:"Start Period"}),Object(b.jsx)("th",{children:"End Date"}),Object(b.jsx)("th",{children:"End Period"}),Object(b.jsx)("th",{children:"No. of Working Days"}),Object(b.jsx)("th",{children:"No. of Calendar Days"}),Object(b.jsx)("th",{children:"Remove"})]})}),Object(b.jsx)("tbody",{children:h.length>0?h.map((function(e){return Object(b.jsxs)("tr",{className:"enterLeave_grid_b",children:[Object(b.jsx)("td",{children:Y(e.startLeaveDate)+" ("+U[I(e.startLeaveDate).getDay()]+")"}),Object(b.jsx)("td",{children:e.startPeriod}),Object(b.jsx)("td",{children:Y(e.endLeaveDate)+" ("+U[I(e.endLeaveDate).getDay()]+")"}),Object(b.jsx)("td",{children:e.endPeriod}),Object(b.jsx)("td",{children:e.workday}),Object(b.jsx)("td",{children:e.calendarDay}),Object(b.jsx)("td",{children:Object(b.jsx)("i",{className:"fa fa-close clickable",onClick:function(){var t;t=e.id,p((function(e){return e.filter((function(e){return e.id!==t}))}))}})})]},e.id)})):null})]})]})}),Object(b.jsx)(v,{position:10})]})},N=function(e){var t=e.currentRacf,a=e.sharePointPath,n=e.sharePointID,c=e.year;return Object(b.jsx)(r.Fragment,{children:Object(b.jsxs)("div",{className:"sharePoint_grid",children:[Object(b.jsx)("div",{className:"sharePoint_cell",children:Object(b.jsx)("img",{src:"../static/img/sharePointx.jpg",alt:"sharePoint",className:"sharePoint_photo"})}),Object(b.jsx)("div",{}),Object(b.jsxs)("div",{className:"sharePoint_cell",children:["Go to SharePoint\xa0",Object(b.jsx)("i",{className:"fa  fa-sign-in clickable",onClick:function(){!function(){var e="https://macysinc.sharepoint.com/sites/MMGOverseas/".concat(a+c.toString(),"/Forms/AllItems.aspx?id=%2Fsites%2FMMGOverseas%2F",a+c.toString(),"%2F",t,"%2F","&FilterType1=Text&viewid=720379f5-eb23-410f-81d1-f4e43a1a1cab&FilterField1=SharePointID&FilterValue1=",n,"&dt=",(new Date).getTime());console.log(e);var r=window.open(e,"_blank","noopener,noreferrer");r&&(r.opener=null)}()}})]}),Object(b.jsx)("div",{}),Object(b.jsxs)("div",{className:"sharePoint_cell",children:["SharePoint ID  : ",n," \xa0\xa0"]})]})})},k=function(e){var t=e.currentRacf,a=e.sharePointID,n=e.setDisplayAlert,c=e.setRefreshSharePointList,s=e.refreshSharePointList,i=e.sharePointFiles,l=e.setSharePointFiles,o=e.year;Object(r.useEffect)((function(){Object(f.trackPromise)(j()({url:"/spoint/api/getsharepointfiles",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({racf:t,sharePointID:a,year:o})}).then((function(e){return e.data})).then((function(e){l(e)})).catch((function(e){404===e.response.status&&n({message:"Folder on SharePoint was not created !",position:4,timeout:2e3,color:"alert__red"})})),"getSharePoint")}),[n,a,t,s,l,o]);return Object(b.jsx)(r.Fragment,{children:i?Object(b.jsxs)("div",{className:"showSharePointFiles_section",children:[Object(b.jsxs)("div",{className:"showSharePointFiles_grid_header",children:[Object(b.jsx)("div",{children:"File Name"}),Object(b.jsx)("div",{children:"File Size"}),Object(b.jsx)("div",{children:"Download"}),Object(b.jsx)("div",{children:"File Type"}),Object(b.jsx)("div",{children:"Delete"})]}),Object(b.jsx)("div",{children:i.length>0?i.map((function(e,t){return Object(b.jsxs)("div",{className:"showSharePointFiles_grid_detail",children:[Object(b.jsx)("div",{children:e.filename}),Object(b.jsx)("div",{children:e.size}),Object(b.jsx)("div",{children:Object(b.jsx)("i",{className:"clickable fa fa-download",onClick:function(){var t,a;t=e.filename,a=e.relative_path,Object(f.trackPromise)(fetch("/spoint/api/downloadSharePointFile",{method:"GET",headers:{"Content-Type":"application/octet-stream","Content-Disposition":"attachment","Cache-Control":"no-cache",file_url:encodeURIComponent(a)}}).then((function(e){return e.blob()})).then((function(e){var a=window.URL.createObjectURL(new Blob([e])),r=document.createElement("a");r.href=a,r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.parentNode.removeChild(r)})),"downloadSharePoint")}})}),Object(b.jsx)("div",{children:Object(b.jsx)("i",{className:"fa fa-file fa-file-doc"})}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{id:"sharePointFiles_deleteButton",onClick:function(){var t;t=e.unique_id,!0===window.confirm("Are you sure you want to delete the SharePoint file ? ")&&Object(f.trackPromise)(j()({url:"/spoint/api/deleteSPfile",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:t})}).then((function(e){n({message:"SharePoint file deleted successfully !",position:4,timeout:3e3,color:"alert__green"}),c((function(e){return!e})),document.getElementById("sharePoint_file").value=null})).catch((function(e){n({message:"Error deleting the SP file !",position:4,timeout:3e3,color:"alert__red"})})),"delteSharePoint")},children:"\xd7"})})]},t)})):Object(b.jsxs)("div",{className:"showSharePointFiles_grid_detail",children:[Object(b.jsx)("div",{children:"No Files"}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{})]},0)})]}):null})},D=function(e){var t=e.setDisplayAlert,a=e.sharePointPath,n=e.sharePointID,c=e.currentRacf,s=e.userProfile,l=e.setRefreshSharePointList,o=e.year,d=Object(r.useState)(),p=Object(i.a)(d,2),O=p[0],m=p[1],v=function(e){for(var t="",a=0;a<e.length;a+=1)t=t.concat("\n\n",e[a].file," - ",e[a].reason);t.length>0&&(t="Following files cannot be uploaded : ".concat(t),alert(t))},x=function(){var e=Object(h.a)(Object(u.a)().mark((function e(){var r,i,d,h,b,p;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=O.file,i={headers:{sharePointID:n,relative_url:a.concat(o.toString(),"/",c),name:s.userName,office:s.office}},e.prev=2,d=[],h=0;case 5:if(!(h<r.length)){e.next=22;break}return(b=new FormData).append("files[]",r[h]),e.prev=8,e.next=11,Object(f.trackPromise)(j.a.post("/spoint/api/upload",b,i),"uploadSharePoint");case 11:t({message:"Successfully uploaded "+r[h].name+" !!",position:4,timeout:3e3,color:"alert__green"}),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(8),p=e.t0.response.data.error_message,t({message:p,position:4,timeout:3e3,color:"alert__red"}),d=d.concat({file:r[h].name,status:"Failed",reason:p});case 19:h++,e.next=5;break;case 22:l((function(e){return!e})),v(d),document.getElementById("sharePoint_file").value=null,e.next=31;break;case 27:e.prev=27,e.t1=e.catch(2),t({message:"Unexpected upload error !!",osition:3,timeout:3e3,color:"alert__red"}),document.getElementById("sharePoint_file").value=null;case 31:case"end":return e.stop()}}),e,null,[[2,27],[8,14]])})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)(r.Fragment,{children:Object(b.jsx)("div",{className:"uploadDoc",children:Object(b.jsxs)("form",{children:[Object(b.jsx)("input",{type:"file",multiple:!0,name:"file",id:"sharePoint_file",onChange:function(e){m({file:e.target.files})}}),Object(b.jsx)("button",{type:"button",onClick:x,children:"Upload Documents"})]})})})},w=function(e){var t=e.currentRacf,a=e.superUserMode,n=e.setDisplayAlert,c=e.userProfile,s=e.staff,l=e.years,o=e.convert2MMDDYY,d=e.sharePointPath,j=e.convertToLocalTime,O=e.alert,m=Object(r.useState)(""),g=Object(i.a)(m,2),y=g[0],_=g[1],w=Object(r.useState)(""),L=Object(i.a)(w,2),C=L[0],T=L[1],M=Object(r.useState)(!1),F=Object(i.a)(M,2),A=F[0],E=F[1],U=Object(r.useState)([]),R=Object(i.a)(U,2),I=R[0],Y=R[1],J=Object(r.useState)(""),V=Object(i.a)(J,2),B=V[0],G=V[1],W=Object(r.useState)(!1),H=Object(i.a)(W,2),z=H[0],q=H[1],K=Object(r.useState)([]),Q=Object(i.a)(K,2),X=Q[0],Z=Q[1];function $(e){var t=new Date(e).toTimeString(),a=new Date(e).toDateString()+" "+t,r=a.search("GMT+")-1;return a=a.substring(0,r)}Object(r.useEffect)((function(){var e=document.querySelector(":root"),t=navigator.userAgent.toLowerCase();/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(t)?e.style.setProperty("--changeTrack_scroll_width","7fr"):e.style.setProperty("--changeTrack_scroll_width","6.7fr"),t.includes("safari")&&t.includes("macintosh")&&e.style.setProperty("--changeTrack_scroll_width","7fr")}),[]),Object(r.useEffect)((function(){G(Object(P.a)())}),[A]);var ee=function(){var e=Object(h.a)(Object(u.a)().mark((function e(a){var r,c,s,i,l,o;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="Leave Summary for "+y+" ("+t+").xlsx",e.next=4,Object(f.trackPromise)(fetch("/eleave/api/printsummary",{method:"POST",headers:{"Content-Type":"application/octet-stream","Content-Disposition":"attachment","Cache-Control":"no-cache",localTime:JSON.stringify($(Date.now())),parameters:JSON.stringify({year:Number(y),racf:t})}}),"printSummary");case 4:if((r=e.sent).ok){e.next=13;break}return e.next=8,r.text();case 8:c=e.sent,s=JSON.parse(c).error_message,n({message:s,position:3,timeout:4e3,color:"alert__red"}),e.next=23;break;case 13:return e.next=15,r.blob();case 15:i=e.sent,l=window.URL.createObjectURL(i),(o=document.createElement("a")).href=l,o.setAttribute("download",a),document.body.appendChild(o),o.click(),o.parentNode.removeChild(o);case 23:return e.abrupt("return",null);case 26:e.prev=26,e.t0=e.catch(0);case 28:n({message:"The summary seems no data !  Please check !",position:3,timeout:4e3,color:"alert__red"});case 29:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)(r.Fragment,{children:[Object(b.jsx)("div",{className:"subHeading",children:" Apply Leave"}),Object(b.jsx)("button",{id:"printSummary",onClick:function(e){"printSummary"===e.target.id&&ee("Leave Summary.xlsx")},children:"Print Summary"}),Object(b.jsx)(x,{userProfile:c,staff:s,years:l,year:y,setYear:_,leaveType:C,setLeaveType:T,setDisplayAlert:n,currentRacf:t,refreshPage:A,convert2MMDDYY:o,setLeaveList:Y}),1===O.position?Object(b.jsx)("div",{className:"flex-row",children:Object(b.jsx)("div",{className:"flex-large",children:Object(b.jsx)(p,{alert:O})})}):null,4===O.position?Object(b.jsx)("div",{className:"flex-row",children:Object(b.jsx)("div",{className:"flex-large",children:Object(b.jsx)(p,{alert:O})})}):null,Object(b.jsx)(v,{position:4}),C&&"LVE04"===C?Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"flex-row null",children:Object(b.jsx)("div",{className:"flex-large ",children:Object(b.jsx)(N,{currentRacf:t,year:y,office:c.office,sharePointPath:d,sharePointID:B})})}),Object(b.jsx)("div",{className:"flex-row null",children:Object(b.jsx)("div",{className:"flex-large ",children:Object(b.jsx)(k,{currentRacf:t,convertToLocalTime:j,setDisplayAlert:n,sharePointID:B,setRefreshSharePointList:q,refreshSharePointList:z,setSharePointFiles:Z,sharePointFiles:X,year:y})})}),Object(b.jsx)("div",{className:"flex-row null",children:Object(b.jsx)("div",{className:"flex-large ",children:Object(b.jsx)(D,{setDisplayAlert:n,sharePointPath:d,currentRacf:t,sharePointID:B,userProfile:c,setRefreshSharePointList:q,year:y})})})]}):null,Object(b.jsx)(v,{position:3}),Object(b.jsx)(S,{year:y,racf:t,superUserMode:a,leaveType:C,setDisplayAlert:n,setRefreshPage:E,sharePointID:B,sharePointFiles:X,leaveList:I,setLeaveList:Y})]})},L=function(e){return Object(b.jsx)("div",{className:"welcome",children:Object(b.jsx)("div",{children:Object(b.jsx)("img",{src:"/static/img/vacation.jpeg","aria-hidden":!0,alt:"MMG Overseas e-Leave",style:{width:"100%",height:"103%",border:0}})})})},C=function(e){var t=e.currentRacf,a=e.setCurrentRacf,n=e.displayAndLogin,c=e.setUserProfile,s=Object(r.useState)([]),l=Object(i.a)(s,2),o=l[0],d=l[1],u=Object(r.useCallback)((function(){return Object(f.trackPromise)(j()({url:"/eleave/api/getUserList",method:"POST",headers:{"Content-type":"application/json",api:"yes"}}).then((function(e){return e.data})).then((function(e){var t=e.userList;t.sort((function(e,t){return e.name<t.name?-1:1})),d(t)})).catch((function(e){n({message:e.response.data.error_message,position:4,timeout:4e3,color:"alert__red"})})),"switchUser"),function(){d(null)}}),[n]);Object(r.useEffect)((function(){u()}),[u]);return Object(b.jsx)(r.Fragment,{children:Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"subHeading",children:"Impersonate:"}),Object(b.jsxs)("div",{className:"switchUser_grid",children:[Object(b.jsx)("div",{}),Object(b.jsx)("div",{children:Object(b.jsx)("select",{style:{width:"30rem",height:"1.5rem"},onChange:function(e){var t,r=e.target.value,s=o.filter((function(e){return e.racf===r}));a(s[0].racf),t=s[0].racf,Object(f.trackPromise)(j()({url:"/api/impersonateUser",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({impersonatedUser:t})}).then((function(e){return e.data})).then((function(e){c(e.userProfile)})).catch((function(e){n({message:e.response.data.error_message,position:4,timeout:4e3,color:"alert__red"})})),"switchUser")},id:"switchUser",className:"clickable",value:t||"",children:o&&o.map((function(e,t){return Object(b.jsxs)("option",{value:e.racf,children:[e.name," (",e.racf,")"]},t)}))})}),Object(b.jsx)("div",{})]})]}),Object(b.jsx)(v,{position:4})]})})},T=function(e){var t=e.userProfile,a=e.setSuperUserMode,n=e.superUserMode,c=Object(r.useState)(""),s=Object(i.a)(c,2),l=s[0],o=s[1];Object(r.useEffect)((function(){o("/api/getPhoto/"+t.email)}),[t.email]);var d=function(){a(!n)};return Object(b.jsx)(r.Fragment,{children:Object(b.jsxs)("div",{className:"userProfile ".concat("dev"===t.databaseSchema?"userProfile_dev_color":"userProfile_prod_color"),children:[Object(b.jsx)("div",{className:"userProfile_d userProfile_grid_d",children:Object(b.jsx)("img",{src:"static/img/macys-header.jpg","aria-hidden":!0,alt:"",width:"60",height:"60"})}),Object(b.jsx)("div",{className:"userProfile_e userProfile_grid_e",children:"e-leave"}),Object(b.jsxs)("div",{className:"userProfile_b userProfile_grid_b",children:[t.userName," "]}),Object(b.jsx)("div",{className:"userProfile_c userProfile_grid_c",children:t.superUser&&n?Object(b.jsx)("i",{className:"fa fa-superpowers"+(t.superUser?" userProfile_icon ":void 0),onClick:function(){d()}}):Object(b.jsx)("i",{className:"fa fa-user "+(t.superUser?" userProfile_icon":void 0),onClick:function(){d()}})}),Object(b.jsxs)("div",{className:"userProfile_a userProfile_grid_a",children:[Object(b.jsx)("img",{src:l,"aria-hidden":!0,alt:"Searching for photo...",width:"60",height:"60"})," "]})]})})},M=function(e){var t=e.currentRacf,a=e.setDisplayAlert,n=e.superUserMode,c=e.convert2MMDDYY,s=e.convertToLocal,l=e.sharePointPath,o=Object(r.useState)([]),d=Object(i.a)(o,2),p=d[0],O=d[1],m=Object(r.useState)([]),x=Object(i.a)(m,2),y=x[0],_=x[1],P=Object(r.useCallback)((function(){return Object(f.trackPromise)(j()({url:"/eleave/api/listapprove",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({racf:t})}).then((function(e){return e.data})).then((function(e){var t=e.result;O(t);var a=new Array(t.length).fill(!1);_(a)})).catch((function(e){a({message:e.response.data.error_message,position:4,timeout:3e3,color:"alert__red"})})),"approvalCenter"),function(){}}),[t,a]);function S(e,t){for(var r=0,n=0,c=Object(g.a)(e),s="",i=0;i<y.length;i+=1)if(!0===y[i]&&(r++,0===n&&(n=r,s=c[i].ref_no),r>t))return a({message:"select one application at a time please !",position:3,timeout:4e3,color:"alert__red"}),D(),null;return 0===n?(a({message:"No application has been selected !",position:3,timeout:4e3,color:"alert__red"}),null):{ref_no:s,pendingList:e}}Object(r.useEffect)((function(){P()}),[t,P]);var N=function(){var e=Object(h.a)(Object(u.a)().mark((function e(){var r,c,i,l;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object(g.a)(p),null!==S(p,9999)){e.next=4;break}return e.abrupt("return",null);case 4:c=0;case 5:if(!(c<y.length)){e.next=20;break}if(!0!==y[c]){e.next=17;break}return i={headers:{"Content-type":"application/json",api:"yes"}},l={refNo:r[c].ref_no,racf:t,action:"APPROVE",superUser:n,localTime:s(Date.now())},e.prev=9,e.next=12,Object(f.trackPromise)(j.a.post("/eleave/api/changestatus",l,i),"changeStatus").then((function(e){return e.data})).then((function(e){})).catch((function(e){a({message:e.response.data.error_message,position:4,timeout:3e3,color:"alert__red"})}));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),a({message:e.t0.response.data.error_message,position:4,timeout:5e3,color:"alert__red"});case 17:c+=1,e.next=5;break;case 20:return O(r),D(),P(),e.abrupt("return",(function(){}));case 24:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(h.a)(Object(u.a)().mark((function e(){var r,c,i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object(g.a)(p),null!==S(p,9999)){e.next=4;break}return e.abrupt("return",null);case 4:c=Object(u.a)().mark((function e(c){var i,l;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==y[c]){e.next=11;break}return i={headers:{"Content-type":"application/json",api:"yes"}},l={refNo:r[c].ref_no,racf:t,action:"REJECT",superUser:n,localTime:s(Date.now())},e.prev=3,e.next=6,Object(f.trackPromise)(j.a.post("/eleave/api/changestatus",l,i),"changeStatus").then((function(e){return e.data})).then((function(e){r[c].approvalStatus="REJECT"})).catch((function(e){console.log("error from changestatus",e),a({message:e.response.data.error_message,position:4,timeout:3e3,color:"alert__red"})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),a({message:"Unexpected error",position:4,timeout:3e3,color:"alert__red"});case 11:case"end":return e.stop()}}),e,null,[[3,8]])})),i=0;case 6:if(!(i<y.length)){e.next=11;break}return e.delegateYield(c(i),"t0",8);case 8:i+=1,e.next=6;break;case 11:return O(r),D(),P(),e.abrupt("return",(function(){}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){for(var e=document.getElementsByName("approval"),t=0;t<e.length;t++)e[t].checked=!1,y[t]=!1};return Object(b.jsx)(r.Fragment,{children:Object(b.jsx)("div",{children:Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"subHeading",children:"Approval Center"}),Object(b.jsxs)("table",{id:"approvalCenter_Table",children:[Object(b.jsxs)("tr",{className:"approvalCenter_grid",children:[Object(b.jsx)("th",{children:"Select"}),Object(b.jsx)("th",{children:"Ref No."}),Object(b.jsx)("th",{children:"Applicant"}),Object(b.jsx)("th",{children:"Type"}),Object(b.jsx)("th",{children:"Status"}),Object(b.jsx)("th",{children:"Docs"}),Object(b.jsx)("th",{children:"\xa0"})]}),Object(b.jsx)("tbody",{children:p.map((function(e,t){return Object(b.jsxs)("tr",{className:"approvalCenter_grid",children:[Object(b.jsx)("td",{className:"approvalCenter_input",children:Object(b.jsx)("input",{type:"checkbox",name:"approval",value:e.ref,onChange:function(){return function(e){var t=y.map((function(t,a){return a===e?!t:t}));_(t)}(t)}})}),Object(b.jsx)("td",{children:e.ref_no}),Object(b.jsx)("td",{children:e.staff}),Object(b.jsx)("td",{children:e.type}),Object(b.jsx)("td",{children:e.approvalStatus}),Object(b.jsx)("td",{children:"LVE04"===e.type_id?Object(b.jsx)("i",{class:"fa fa-file-text-o",onClick:function(){!function(e,t,a){var r=e.substring(3,7),n="https://macysinc.sharepoint.com/sites/MMGOverseas/".concat(l+r,"/Forms/AllItems.aspx?id=%2Fsites%2FMMGOverseas%2F",l+r,"%2F",t,"%2F","&FilterType1=Text&viewid=720379f5-eb23-410f-81d1-f4e43a1a1cab&FilterField1=SharePointID&FilterValue1=",a,"&dt=",(new Date).getTime()),c=window.open(n,"_blank","noopener,noreferrer");c&&(c.opener=null)}(e.ref_no,e.racf,e.sharePointId)}}):null}),Object(b.jsxs)("td",{children:[Object(b.jsxs)("tr",{className:"approvalCenterInner_grid",children:[Object(b.jsx)("th",{children:"Working Days"}),Object(b.jsx)("th",{children:"Calendar Days"}),Object(b.jsx)("th",{children:"Start"}),Object(b.jsx)("th",{children:"End"})]}),e.details.map((function(e,t){return Object(b.jsxs)("tr",{className:"approvalCenterInner2_grid",children:[Object(b.jsx)("td",{children:e.workday}),Object(b.jsx)("td",{children:e.calendarDay}),Object(b.jsxs)("td",{children:[c(e.startDate),"\xa0(",e.startTime,")"]}),Object(b.jsxs)("td",{children:[c(e.endDate),"\xa0(",e.endTime,")"]})]},t)}))]})]},t)}))})]}),Object(b.jsx)(v,{position:4}),Object(b.jsxs)("div",{className:"approvalCenter",children:[Object(b.jsx)("button",{className:"fa fa-dot-circle-o",onClick:function(){!function(){for(var e=document.getElementsByName("approval"),t=0;t<e.length;t++)e[t].checked=!0,y[t]=!0}()},children:"\xa0Select All"}),Object(b.jsx)("button",{className:"fa fa-circle-o",onClick:function(){D()},children:"\xa0Clear All"}),Object(b.jsx)("button",{className:"fa fa-check",onClick:function(){N()},children:"\xa0Approve"}),Object(b.jsx)("button",{className:"fa fa-times",onClick:function(){k()},children:"\xa0Reject"})]})]})})})},F=function(e){var t=e.currentRacf,a=e.setDisplayAlert,n=e.superUserMode,c=e.convert2MMDDYY,s=e.convertToLocal,l=Object(r.useState)([]),o=Object(i.a)(l,2),d=o[0],p=o[1],O=Object(r.useState)([]),m=Object(i.a)(O,2),x=m[0],y=m[1],_=Object(r.useCallback)((function(){return Object(f.trackPromise)(j()({url:"eleave/api/ListApprovedByYear",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({racf:t,superUser:n,localTime:s(Date.now())})}).then((function(e){return e.data})).then((function(e){var t=e.result;p(t);var a=new Array(t.length).fill(!1);y(a)})).catch((function(e){a({message:e.response.data.error_message,position:4,timeout:3e3,color:"alert__red"})})),"cancelLeave"),function(){p(null),y(null)}}),[t,a,n,s]);Object(r.useEffect)((function(){_()}),[t,_]);function P(e,t){for(var r=0,n=0,c=Object(g.a)(e),s="",i=0;i<x.length;i+=1)if(!0===x[i]&&(r++,0===n&&(n=r,s=c[i].ref_no),r>t))return a({message:"select one application at a time please !",position:3,timeout:4e3,color:"alert__red"}),N(),null;return 0===n?(a({message:"No application has been selected !",position:3,timeout:4e3,color:"alert__red"}),null):{ref_no:s,pendingList:e}}var S=function(){var e=Object(h.a)(Object(u.a)().mark((function e(){var t,r,c;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(g.a)(d),null!==P(d,9999)){e.next=4;break}return e.abrupt("return",null);case 4:if(window.confirm("Are you sure you want to cancel?")){e.next=6;break}return e.abrupt("return",null);case 6:r=Object(u.a)().mark((function e(r){var c,i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==x[r]){e.next=11;break}return c={headers:{"Content-type":"application/json",api:"yes"}},i={refNo:t[r].ref_no,racf:t[r].racf,action:"CANCEL",superUser:n,localTime:s(Date.now())},e.prev=3,e.next=6,Object(f.trackPromise)(j.a.post("/eleave/api/changestatus",i,c),"changeStatus").then((function(e){return e.data})).then((function(e){t[r].approvalStatus="CANCEL"})).catch((function(e){a({message:t[r].ref_no+" : "+e.response.data.error_message,position:4,timeout:3e3,color:"alert__red"})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),a({message:e.t0.response.data.error_message,position:0,timeout:3e3,color:"alert__red"});case 11:case"end":return e.stop()}}),e,null,[[3,8]])})),c=0;case 8:if(!(c<x.length)){e.next=13;break}return e.delegateYield(r(c),"t0",10);case 10:c+=1,e.next=8;break;case 13:return p(t),N(),_(),e.abrupt("return",(function(){y(null),p(null)}));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){for(var e=document.getElementsByName("cancel"),t=0;t<e.length;t++)e[t].checked=!1,x[t]=!1},k=function(){var e=Object(h.a)(Object(u.a)().mark((function e(){var r,n,c,i,l,o,j,h,b,O;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,n=null,null!==(c=P(d,1))){e.next=7;break}return e.abrupt("return",null);case 7:r=c.new_pendingList,n=c.ref_no;case 9:return e.prev=9,i="Leave Record for "+n+" ("+t+").xlsx",e.next=13,Object(f.trackPromise)(fetch("/eleave/api/printapply",{method:"POST",headers:{"Content-Type":"application/octet-stream","Content-Disposition":"attachment","Cache-Control":"no-cache",localTime:JSON.stringify(s(Date.now())),parameters:JSON.stringify({racf:t,ref:n})}}),"printApply");case 13:if((l=e.sent).ok){e.next=22;break}return e.next=17,l.text();case 17:o=e.sent,j=JSON.parse(o).error_message,a({message:j,position:3,timeout:4e3,color:"alert__red"}),e.next=32;break;case 22:return e.next=24,l.blob();case 24:h=e.sent,b=window.URL.createObjectURL(h),(O=document.createElement("a")).href=b,O.setAttribute("download",i),document.body.appendChild(O),O.click(),O.parentNode.removeChild(O);case 32:return e.abrupt("return",null);case 35:e.prev=35,e.t0=e.catch(9),a({message:"The summary seems no data !  Please check !",position:3,timeout:4e3,color:"alert__red"});case 38:return p(r),N(),e.abrupt("return",(function(){y(null),p(null)}));case 41:case"end":return e.stop()}}),e,null,[[9,35]])})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)(r.Fragment,{children:Object(b.jsx)("div",{children:Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"subHeading",children:"Cancel & Print"}),Object(b.jsxs)("table",{id:"cancelLeave_Table",children:[Object(b.jsxs)("tr",{className:"cancelLeave_grid",children:[Object(b.jsx)("th",{children:"Select"}),Object(b.jsx)("th",{children:"Ref No."}),Object(b.jsx)("th",{children:"Applicant"}),Object(b.jsx)("th",{children:"Type"}),Object(b.jsx)("th",{children:"Status"}),Object(b.jsx)("th",{children:"\xa0"})]}),d.map((function(e,t){return Object(b.jsxs)("tr",{className:"cancelLeave_grid",children:[Object(b.jsx)("td",{className:"cancelLeave_input",children:Object(b.jsx)("input",{type:"checkbox",name:"cancel",value:e.ref,onChange:function(){return function(e){var t=x.map((function(t,a){return a===e?!t:t}));y(t)}(t)}})}),Object(b.jsx)("td",{children:e.ref_no}),Object(b.jsx)("td",{children:e.staff}),Object(b.jsx)("td",{children:e.type}),Object(b.jsx)("td",{children:e.approvalStatus}),Object(b.jsxs)("td",{children:[Object(b.jsxs)("tr",{className:"cancelLeaveInner_grid",children:[Object(b.jsx)("th",{children:"Working Days"}),Object(b.jsx)("th",{children:"Calendar Days"}),Object(b.jsx)("th",{children:"Start"}),Object(b.jsx)("th",{children:"End"})]}),e.details.map((function(e,t){return Object(b.jsxs)("tr",{className:"cancelLeaveInner2_grid",children:[Object(b.jsx)("td",{children:e.workday}),Object(b.jsx)("td",{children:e.calendarDay}),Object(b.jsxs)("td",{children:[c(e.startDate),"\xa0(",e.startTime,")"]}),Object(b.jsxs)("td",{children:[c(e.endDate),"\xa0(",e.endTime,")"]})]},t)}))]})]},t)}))]}),Object(b.jsx)(v,{position:4}),Object(b.jsxs)("div",{className:"cancelLeave",children:[Object(b.jsx)("button",{className:"fa fa-dot-circle-o",onClick:function(){!function(){for(var e=document.getElementsByName("cancel"),t=0;t<e.length;t++)e[t].checked=!0,x[t]=!0}()},children:"\xa0Select All"}),Object(b.jsx)("button",{className:"fa fa-circle-o",onClick:function(){N()},children:"\xa0Clear All"}),Object(b.jsx)("button",{className:"fa fa-check",onClick:function(){S()},children:"\xa0Cancel"}),Object(b.jsx)("button",{className:"fa fa-book",onClick:function(){k()},children:"\xa0Print Reference"})]})]})})})},A=function(e){var t=e.currentRacf,a=e.setDisplayAlert,n=e.convert2MMDDYY,c=e.convertToLocal,s=Object(r.useState)([]),l=Object(i.a)(s,2),o=l[0],d=l[1];var u=Object(r.useCallback)((function(){if(t)return Object(f.trackPromise)(j()({url:"eleave/api/partnersleave",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({racf:t,localTime:c(Date.now())})}).then((function(e){return e.data})).then((function(e){var t=e.result;d(function(e,t){var a=e;return"asc"===t?a.sort((function(e,t){return e.racf>t.racf?1:-1})):"desc"===t&&a.sort((function(e,t){return e.racf<t.racf?1:-1})),a}(t,"asc"))})).catch((function(e){a({message:e.response.data.error_message,position:4,timeout:3e3,color:"alert__red"})})),"partnersLeave"),function(){d(null)}}),[t,a,c]);return Object(r.useEffect)((function(){u()}),[t,u]),Object(b.jsx)(r.Fragment,{children:Object(b.jsx)("div",{children:Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"subHeading",children:"Partners Status in 2 Weeks"}),Object(b.jsxs)("table",{id:"partnersLeave_Table",children:[Object(b.jsxs)("tr",{className:"partnersLeave_grid",children:[Object(b.jsx)("th",{children:"Ref No."}),Object(b.jsx)("th",{children:"Applicant"}),Object(b.jsx)("th",{children:"Type"}),Object(b.jsx)("th",{children:"Status"}),Object(b.jsx)("th",{children:"\xa0"})]}),o&&o.map((function(e,t){return Object(b.jsxs)("tr",{className:"partnersLeave_grid",children:[Object(b.jsx)("td",{children:e.ref_no}),Object(b.jsx)("td",{children:e.staff}),Object(b.jsx)("td",{children:e.type}),Object(b.jsx)("td",{children:e.approvalStatus}),Object(b.jsxs)("td",{children:[Object(b.jsxs)("tr",{className:"partnersLeaveInner_grid",children:[Object(b.jsx)("th",{children:"Working Days"}),Object(b.jsx)("th",{children:"Calendar Days"}),Object(b.jsx)("th",{children:"Start"}),Object(b.jsx)("th",{children:"End"})]}),e.details&&e.details.map((function(e,t){return Object(b.jsxs)("tr",{className:"partnersLeaveInner2_grid",children:[Object(b.jsx)("td",{children:e.workday}),Object(b.jsx)("td",{children:e.calendarDay}),Object(b.jsxs)("td",{children:[n(e.startDate),"\xa0(",e.startTime,")"]}),Object(b.jsxs)("td",{children:[n(e.endDate),"\xa0(",e.endTime,")"]})]},t)}))]})]},t)}))]}),Object(b.jsx)(v,{position:4})]})})})},E=function(){var e=Object(r.useState)({}),t=Object(i.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(null),d=Object(i.a)(c,2),u=d[0],h=d[1],O=Object(r.useState)(!1),m=Object(i.a)(O,2),v=m[0],x=m[1],g=Object(r.useState)(!1),y=Object(i.a)(g,2),_=y[0],P=y[1],S=Object(r.useState)({position:100}),N=Object(i.a)(S,2),k=N[0],D=N[1],E=Object(r.useState)(""),U=Object(i.a)(E,2),R=U[0],I=U[1],Y=Object(r.useCallback)((function(e){D(e),setTimeout((function(){D({position:100})}),e.timeout)}),[]),J=Object(r.useCallback)((function(e){var t=Object(s.a)(Object(s.a)({},e),{},{message:e.message+" Now, taking you to the login page..."});Y(t),setTimeout((function(){window.location="/login"}),e.timeout)}),[Y]);function V(e){var t=e.slice(0,10).split("-");return t=t[1]+"/"+t[2]+"/"+t[0][2]+t[0][3]}function B(e){return new Date(e).toDateString()}return Object(r.useEffect)((function(){Object(f.trackPromise)(j()({url:"/api/getUserProfile",method:"POST",headers:{"Content-type":"application/json",api:"yes"}}).then((function(e){return e.data})).then((function(e){n(e.userProfile),h(e.userProfile.racf),x(e.userProfile.superUser),I(e.sharePointPath)})).catch((function(e){console.log(e)})))}),[]),Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("div",{className:"flex-row",children:Object(b.jsxs)("div",{className:"flex-large",children:[Object(b.jsx)(T,{userProfile:a,setSuperUserMode:P,superUser:v,superUserMode:_}),Object(b.jsxs)(l.a,{children:[Object(b.jsx)("nav",{children:Object(b.jsxs)("ul",{className:"app_header",children:[Object(b.jsx)("li",{children:Object(b.jsx)(l.b,{to:"/",className:"link",children:"Home"})}),Object(b.jsx)("li",{children:Object(b.jsx)(l.b,{to:"/ApplyLeave",className:"link",children:"Apply Leave"})}),Object(b.jsx)("li",{children:Object(b.jsx)(l.b,{to:"/CancelLeave",className:"link",children:"Cancel & Print"})}),Object(b.jsx)("li",{children:Object(b.jsx)(l.b,{to:"/ApprovalCenter",className:"link",children:"Approval Center"})}),Object(b.jsx)("li",{children:Object(b.jsx)(l.b,{to:"/PartnersLeave",className:"link",children:"Partners Status"})}),v?Object(b.jsx)("li",{children:Object(b.jsx)(l.b,{to:"/SwitchUser",className:"link",children:"Switch User"})}):null,v?Object(b.jsx)("li",{className:"link",onClick:function(){!function(){var e=window.open("https://app.powerbi.com/reportEmbed?reportId=a1e9a85b-a97c-42d0-9305-f283e64cd79a&autoAuth=true&filterPanelEnabled=False&pageName=ReportSectionf1be12cf083e1c0eba15","_blank","noopener,noreferrer");e&&(e.opener=null)}()},children:"Power BI"}):null,Object(b.jsx)("button",{className:"fa fa-sign-out",onClick:function(){localStorage.clear(),window.location="/logout"},children:"Logout"})]})}),3===k.position?Object(b.jsx)("div",{className:"flex-row",children:Object(b.jsx)("div",{className:"flex-large",children:Object(b.jsx)(p,{alert:k})})}):null,Object(b.jsxs)(o.c,{children:[Object(b.jsx)(o.a,{path:"/",element:Object(b.jsx)(L,{env:a.environment,currentRacf:u})}),Object(b.jsx)(o.a,{path:"/PartnersLeave",element:Object(b.jsx)(A,{currentRacf:u,setDisplayAlert:Y,convert2MMDDYY:V,convertToLocal:B})}),Object(b.jsx)(o.a,{path:"/ApplyLeave",element:Object(b.jsx)(w,{currentRacf:u,superUserMode:_,setDisplayAlert:Y,userProfile:a,convert2MMDDYY:V,sharePointPath:R,convertToLocalTime:function(e){var t=new Date(e).toTimeString(),a=new Date(e).toDateString()+" "+t,r=a.search("GMT+")-1;return a=a.substring(0,r)},alert:k})}),Object(b.jsx)(o.a,{path:"/ApprovalCenter",element:Object(b.jsx)(M,{currentRacf:u,setDisplayAlert:Y,superUserMode:_,convert2MMDDYY:V,convertToLocal:B,sharePointPath:R})}),Object(b.jsx)(o.a,{path:"/CancelLeave",element:Object(b.jsx)(F,{currentRacf:u,setDisplayAlert:Y,superUserMode:_,convert2MMDDYY:V,convertToLocal:B})}),Object(b.jsx)(o.a,{path:"/SwitchUser",element:Object(b.jsx)(C,{currentRacf:u,setCurrentRacf:h,displayAndLogin:J,setUserProfile:n})})]})]})]})})})};c.a.render(Object(b.jsx)(E,{}),document.getElementById("root"))},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){}},[[153,1,2]]]);
//# sourceMappingURL=main.db9aa71f.chunk.js.map